<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>蛙蛙池塘</title>
  <subtitle>欢迎来到蛙蛙池塘</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.ihuhao.com/"/>
  <updated>2016-04-17T12:59:24.000Z</updated>
  <id>http://blog.ihuhao.com/</id>
  
  <author>
    <name>onlytiancai</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>给博客启用HTTPS证书</title>
    <link href="http://blog.ihuhao.com/2016/04/17/%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%90%AF%E7%94%A8HTTPS%E8%AF%81%E4%B9%A6/"/>
    <id>http://blog.ihuhao.com/2016/04/17/给博客启用HTTPS证书/</id>
    <published>2016-04-17T12:08:39.000Z</published>
    <updated>2016-04-17T12:59:24.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;开启443端口&quot;&gt;&lt;a href=&quot;#开启443端口&quot; class=&quot;headerlink&quot; title=&quot;开启443端口&quot;&gt;&lt;/a&gt;开启443端口&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# iptables -A INPUT -p tcp --dport 443 -m state --state NEW,ESTABLISHED -j ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# iptables -A OUTPUT -p tcp --sport 443 -m state --state NEW,ESTABLISHED -j ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# service iptables save&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;申请证书&quot;&gt;&lt;a href=&quot;#申请证书&quot; class=&quot;headerlink&quot; title=&quot;申请证书&quot;&gt;&lt;/a&gt;申请证书&lt;/h3&gt;&lt;p&gt;生成用户标识私钥和域名证书私钥&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkdir -p /data/ssl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd /data/ssl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;openssl genrsa 4096 &amp;gt; account.key&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;openssl genrsa 4096 &amp;gt; domain.key&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;生成证书请求文件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl req -new -sha256 -key domain.key -subj &amp;quot;/&amp;quot; -reqexts SAN -config &amp;lt;(cat /etc/pki/tls/openssl.cnf &amp;lt;(printf &amp;quot;[SAN]\nsubjectAltName=DNS:ihuhao.com,DNS:www.ihuhao.com,DNS:app.ihuhao.com&amp;quot;)) &amp;gt; domain.csr
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;使用&lt;code&gt;acme-tiny&lt;/code&gt;脚本到&lt;code&gt;Let&amp;#39;s Encrypt&lt;/code&gt; 申请证书, 下载acme_tiny脚本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget https://raw.githubusercontent.com/diafygi/acme-tiny/master/acme_tiny.py
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;创建一个目录用于存放证书验证过程中的临时文件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir  /data/www/challenges/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;设置nginx, 以&lt;code&gt;blog.ihuhao.com&lt;/code&gt;为例, 如下&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    listen 80;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    listen 443 ssl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    server_name  blog.ihuhao.com;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ssl_certificate     /data/ssl/chained.pem;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ssl_certificate_key /data/ssl/domain.key;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ssl_prefer_server_ciphers on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ssl_dhparam /data/ssl/dhparam.pem;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ssl_ciphers &amp;quot;EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !RC4&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    keepalive_timeout 70;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ssl_session_cache shared:SSL:10m;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ssl_session_timeout 10m; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    add_header Strict-Transport-Security max-age=63072000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    add_header X-Frame-Options DENY;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    add_header X-Content-Type-Options nosniff;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    location ^~ /.well-known/acme-challenge/ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        alias /data/www/challenges/;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        autoindex on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        alias /home/wawa/src/onlytiancai.github.io/;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        expires 1h;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        autoindex on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;执行脚本，申请证书&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;python acme_tiny.py --account-key ./account.key --csr ./domain.csr --acme-dir /data/www/challenges/ &amp;gt; ./signed.crt
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;脚本执行过程中，会在&lt;code&gt;/data/www/challenges&lt;/code&gt;目录下生成一个随机文件，然后&lt;code&gt;Let&amp;#39;s Encrypt&lt;/code&gt;会访问&lt;code&gt;http://blog.ihuhao.com/.well-known/acme-challenge/&lt;/code&gt;下的文件用于验证域名，所以上面的nginx配置要配置好，整个脚本才能执行成功。&lt;/p&gt;
&lt;p&gt;下载中间证书，并和上一步生成的crt粘合在一起，生成nginx使用的证书。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget -O - https://letsencrypt.org/certs/lets-encrypt-x1-cross-signed.pem &amp;gt; intermediate.pem&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat signed.crt intermediate.pem &amp;gt; chained.pem&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;nginx配置，上面已经贴过了，证书路径，证书私钥路径，证书参数配置等都配好了，刷新下nginx配置，网站就可以用https访问了。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/usr/local/nginx/sbin/nginx -s reload
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;hexo改动&quot;&gt;&lt;a href=&quot;#hexo改动&quot; class=&quot;headerlink&quot; title=&quot;hexo改动&quot;&gt;&lt;/a&gt;hexo改动&lt;/h3&gt;&lt;p&gt;因为上面的nginx配置开启了&lt;code&gt;HSTS&lt;/code&gt;, 但hexo的yilia模版里有的地方强引用了http的脚本，所以要做适当的修改，目前主要有如下两个路径&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./themes/yilia/layout/_partial/after-footer.ejs
./themes/yilia/layout/_partial/mathjax.ejs
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;把&lt;code&gt;http://xxx&lt;/code&gt;改成&lt;code&gt;//xxx&lt;/code&gt;，然后&lt;code&gt;hexo generate&lt;/code&gt;生成一下博客就可以了&lt;/p&gt;
&lt;h3 id=&quot;参考链接&quot;&gt;&lt;a href=&quot;#参考链接&quot; class=&quot;headerlink&quot; title=&quot;参考链接&quot;&gt;&lt;/a&gt;参考链接&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://imququ.com/post/letsencrypt-certificate.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Let’s Encrypt，免费好用的 HTTPS 证书&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;开启443端口&quot;&gt;&lt;a href=&quot;#开启443端口&quot; class=&quot;headerlink&quot; title=&quot;开启443端口&quot;&gt;&lt;/a&gt;开启443端口&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>腾讯云主机迁移</title>
    <link href="http://blog.ihuhao.com/2016/03/27/%E8%85%BE%E8%AE%AF%E4%BA%91%E4%B8%BB%E6%9C%BA%E8%BF%81%E7%A7%BB/"/>
    <id>http://blog.ihuhao.com/2016/03/27/腾讯云主机迁移/</id>
    <published>2016-03-26T16:09:01.000Z</published>
    <updated>2016-03-26T17:14:03.000Z</updated>
    
    <content type="html">&lt;p&gt;以前在广州区买的共享核主机，不能续费了，官方给发了代金券，免费升级到独立核的1核1G主机，所以就重新买了北京机房的云主机，要把以前的数据全部导过来。&lt;/p&gt;
&lt;p&gt;安装好Centos6.5 64bit，安全组选了开放所有端口，然后自己用iptables做安全限制就行。&lt;/p&gt;
&lt;p&gt;先用vnc以root登录，密码在邮件发给你了，新建wawa用户，设置密码，用visudo设置允许无密码sudo，配置sshd config把root的ssh登录关了，端口换成非22端口， 允许ssh登录，允许密码登录。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;useradd wawa&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;passwd wawa&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;visudo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    wawa    ALL=(ALL)       NOPASSWD: ALL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vi /etc/ssh/sshd_config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Port 36000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PermitRootLogin no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AllowUsers wawa&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PasswordAuthentication yes &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ChallengeResponseAuthentication yes &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;service sshd reload&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后就可以用putty登录wawa账户了。&lt;/p&gt;
&lt;p&gt;旧机器上把要迁移的数据打包, 主要有Let’s Encrypt的脚本，.vim, .vimrc，.bashrc，.bash_profile，crontab, rc.local, nginx配置，.ssh等&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tar zcfv bk.tar.gz \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /usr/local/nginx/conf/nginx.conf \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /var/spool/cron/root \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /etc/rc.d/rc.local \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /data/ssl/ \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .vimrc .vim .gitconfig .bashrc .bash_profile .ssh/ \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    scripts/ src/ readme&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;打包了，想办法下周到新机器上，解压，大多文件放home目录就可以了，nginx配置，rc.local, crontab, let’s encrypt得重新对一遍。&lt;/p&gt;
&lt;p&gt;安装必备环境，git, nginx, python, node。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo yum gcc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install gcc-c++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install make&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install sqlite-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install zlib-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install readline-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install bzip2-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install pcre pcre-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install openssl-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install mysql-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.0/install.sh | bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nvm install 5.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget https://www.python.org/ftp/python/2.7.7/Python-2.7.7.tgz --no-check-certificate&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar xf Python-2.7.7.tgz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd Python-2.7.7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure --prefix=/usr/local&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo make install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/local/bin/python -V&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget http://nginx.org/download/nginx-1.9.12.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar xf nginx-1.9.12.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd nginx-1.9.12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure --prefix=/usr/local/nginx --with-http_ssl_module --with-http_stub_status_module&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo make install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo /usr/local/nginx/sbin/nginx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;防火墙设置下, 只允许ssh端口，80，443链接，把其它的端口都关了，再把本机访问本机打开，允许本机向外的访问。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;iptables -L -n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -A INPUT -p tcp --dport 36000 -j ACCEPT  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -A OUTPUT -p tcp --sport 36000 -j ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -A INPUT -p tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -A OUTPUT -p tcp --sport 80 -m state --state NEW,ESTABLISHED -j ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -A INPUT -p tcp --dport 443 -m state --state NEW,ESTABLISHED -j ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -A OUTPUT -p tcp --sport 443 -m state --state NEW,ESTABLISHED -j ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -P INPUT DROP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -P FORWARD DROP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -P OUTPUT DROP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -A INPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -A OUTPUT -j ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;service iptables save&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;基本能用了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;以前在广州区买的共享核主机，不能续费了，官方给发了代金券，免费升级到独立核的1核1G主机，所以就重新买了北京机房的云主机，要把以前的数据全部导过来。&lt;/p&gt;
&lt;p&gt;安装好Centos6.5 64bit，安全组选了开放所有端口，然后自己用iptables做安全限制就行。&lt;/p
    
    </summary>
    
    
      <category term="主机迁移" scheme="http://blog.ihuhao.com/tags/%E4%B8%BB%E6%9C%BA%E8%BF%81%E7%A7%BB/"/>
    
  </entry>
  
  <entry>
    <title>性别列上真的不需要建索引吗</title>
    <link href="http://blog.ihuhao.com/2016/03/19/%E6%80%A7%E5%88%AB%E5%88%97%E4%B8%8A%E7%9C%9F%E7%9A%84%E4%B8%8D%E9%9C%80%E8%A6%81%E5%BB%BA%E7%B4%A2%E5%BC%95%E5%90%97/"/>
    <id>http://blog.ihuhao.com/2016/03/19/性别列上真的不需要建索引吗/</id>
    <published>2016-03-19T05:16:51.000Z</published>
    <updated>2016-03-19T05:28:02.000Z</updated>
    
    <content type="html">&lt;p&gt;性别列上真的不需要建索引吗，我们假设有100w数据里只有10个女生，要找到这10个女生，看看有索引和没索引的差别。&lt;/p&gt;
&lt;p&gt;建表&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;use test;
create table people(`id` int(11) auto_increment, `gender` char(1), primary key(`id`));
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;建一个用于填充数据的存储过程&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;delimiter // &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CREATE PROCEDURE filldata()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;begin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    declare v int default 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while v &amp;lt; 50000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        insert into people(gender)  values (&amp;apos;M&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        set v = v + 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    end while;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    insert into people(gender)  values (&amp;apos;F&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while v &amp;lt; 100000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        insert into people(gender)  values (&amp;apos;M&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        set v = v + 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    end while;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;delimiter ;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;填充数据，执行10次这个存储过程,大概每10w男生里有一个女生。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;call filldata();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;call filldata();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;call filldata();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;call filldata();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;call filldata();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;call filldata();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;call filldata();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;call filldata();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;call filldata();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;call filldata();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;确认数据&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; select count(*) from people;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| count(*) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|  1000010 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+----------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 row in set (0.15 sec)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;找出所有女生, 花费0.23秒&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; select * from people where gender = &amp;apos;F&amp;apos; limit 10;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+--------+--------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| id     | gender |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+--------+--------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|  50001 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 150002 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 250003 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 350004 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 450005 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 550006 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 650007 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 750008 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 850009 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 950010 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+--------+--------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10 rows in set (0.23 sec)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在性别上建个索引再找出所有女生，花费0秒&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; create index idx_people_gender on people(gender);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Query OK, 0 rows affected (2.70 sec)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Records: 0  Duplicates: 0  Warnings: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql&amp;gt; select * from people where gender = &amp;apos;F&amp;apos; limit 10;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+--------+--------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| id     | gender |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+--------+--------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|  50001 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 150002 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 250003 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 350004 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 450005 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 550006 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 650007 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 750008 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 850009 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| 950010 | F      |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+--------+--------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10 rows in set (0.00 sec)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;那这种情况下还是有索引查询快。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;性别列上真的不需要建索引吗，我们假设有100w数据里只有10个女生，要找到这10个女生，看看有索引和没索引的差别。&lt;/p&gt;
&lt;p&gt;建表&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;use test;
create table people(`id` int(11) auto_increm
    
    </summary>
    
    
      <category term="mysql" scheme="http://blog.ihuhao.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>开启php-fpm status page</title>
    <link href="http://blog.ihuhao.com/2016/03/17/%E5%BC%80%E5%90%AFphp-fpm-status-page/"/>
    <id>http://blog.ihuhao.com/2016/03/17/开启php-fpm-status-page/</id>
    <published>2016-03-17T04:25:00.000Z</published>
    <updated>2016-03-17T04:27:29.000Z</updated>
    
    <content type="html">&lt;p&gt;要监控PHP运行情况，打开php-fpm的status page可以提供很多有用的信息。&lt;/p&gt;
&lt;p&gt;找到php-fpm的配置路径和master的pid&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# ps -ef | grep &amp;quot;php-fpm: master&amp;quot;
root     31236     1  0 11:46 ?        00:00:00 php-fpm: master process (/usr/local/php/etc/php-fpm.conf)  
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;修改php-fpm配置，打开status page&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vi /usr/local/php/etc/php-fpm.conf
pm.status_path = /php_status
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;重启php-fpm&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;kill -USR2 31236
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;找到nginx配置路径&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# ps -ef | grep &amp;quot;nginx: master&amp;quot;
root      3813     1  0 Mar09 ?        00:00:00 nginx: master process /usr/local/nginx/sbin/nginx
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;修改nginx配置，增加localhost的server节&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;server  
{
    listen       80;     
    server_name  localhost;
    error_log logs/localhost-error_log;
    access_log logs/localhost-access_log;

    location ~ ^/php_status$ 
    {       
        allow 127.0.0.1;
        deny all;

        include fastcgi_params;
        fastcgi_pass unix:/var/run/php5-fpm.socket; # 根据真实情况改动, 详见php-fpm配置
        fastcgi_param SCRIPT_FILENAME $fastcgi_script_name;
    }       

}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;重启nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/usr/local/nginx/sbin/nginx -t
/usr/local/nginx/sbin/nginx -s reload
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;测试php-fpm状态页&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# curl localhost/php_status           
pool:                 www
process manager:      static
start time:           17/Mar/2016:12:09:30 +0800
start since:          747
accepted conn:        4992
listen queue:         0
max listen queue:     0
listen queue len:     0
idle processes:       196
active processes:     4
total processes:      200
max active processes: 15
max children reached: 0
slow requests:        0
&lt;/code&gt;&lt;/pre&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;要监控PHP运行情况，打开php-fpm的status page可以提供很多有用的信息。&lt;/p&gt;
&lt;p&gt;找到php-fpm的配置路径和master的pid&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# ps -ef | grep &amp;quot;php-fpm: master&amp;quot;

    
    </summary>
    
    
      <category term="php" scheme="http://blog.ihuhao.com/tags/php/"/>
    
      <category term="监控" scheme="http://blog.ihuhao.com/tags/%E7%9B%91%E6%8E%A7/"/>
    
  </entry>
  
  <entry>
    <title>新的开始</title>
    <link href="http://blog.ihuhao.com/2016/03/06/%E6%96%B0%E7%9A%84%E5%BC%80%E5%A7%8B/"/>
    <id>http://blog.ihuhao.com/2016/03/06/新的开始/</id>
    <published>2016-03-06T11:09:27.000Z</published>
    <updated>2016-03-09T05:50:35.000Z</updated>
    
    <content type="html">&lt;p&gt;在公司申请了新的笔记本，要重新初始化一套新的环境，这几年都习惯了&lt;code&gt;Putty+Vim&lt;/code&gt;开发 ，
但新笔记本默认装了windows，所以得先把linux安装起来，虚拟机就用VirtualBox, 
虚拟机管理用Vagrant，方便管理，打包的镜像也方便移植，下次重装系统还能接着用。&lt;/p&gt;
&lt;p&gt;VirtualBox和Vagrant都从官网下载就可以了，一路next安装好，然后Vagrant的路径在 环境变量里设置一下，方便在cmd下调用。&lt;/p&gt;
&lt;p&gt;然后下周Vagrant的镜像，以后可能要玩docker，所以在&lt;a href=&quot;http://www.vagrantbox.es/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;vagrantbox.es&lt;/a&gt; 上下载了一个&lt;code&gt;CentOS 6.6 x64 (Minimal, VirtualBox Guest Additions&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;东西都下载好了，开搞&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant.exe box add base ..\download\centos-6.6-x86_64.box&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vagrant.exe init base&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vagrant up&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你会发现，一直卡着，根本就启动不起来，打开VirtualBox看到虚拟机已经在运行了。 但确实vagrant up报错，用ssh也连不上。后来仔细在VirtualBox看了下， 只能装32bit的操作系统，想起来了，需要在BIOS里打开Intel的虚拟化。BIOS设置完重启后 在Virtualbox新建虚拟机选择操作系统时可以看到64bit操作系统了，这时候再&lt;code&gt;vagrant up&lt;/code&gt; 就可以了，具体BIOS设置方式Google下有很多。&lt;/p&gt;
&lt;p&gt;在cmd下打命令还是不习惯，因为习惯了linux终端下的各种命令，快捷键等，所以要下载了 一个&lt;a href=&quot;http://cmder.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;cmder&lt;/a&gt;用，下载完整版的，已经自带ls, grep,git等命令，非常好用。具体设置和使用搜一下。&lt;/p&gt;
&lt;p&gt;用惯了putty，又下载了个&lt;a href=&quot;http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;putty&lt;/a&gt;, 我一般设置如下参数&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;window\appearance\font setting:consolas 12pt &lt;/li&gt;
&lt;li&gt;window\translate\charset:utf-8 &lt;/li&gt;
&lt;li&gt;window\selection\action of mouse buttons:windows .. &lt;/li&gt;
&lt;li&gt;window\line of scoreback:20000 &lt;/li&gt;
&lt;li&gt;connection\auto-login username:root &lt;/li&gt;
&lt;li&gt;connection\seconds of keepalive:10&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;putty登录上去后，安装软件时很慢，发现默认就1G内存，1盒CPU，又把虚拟机配置成2核2G了。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;config.vm.provider &amp;quot;virtualbox&amp;quot; do |v|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  v.memory = 1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  v.cpus = 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;再有一个坑，就是Vagrant会默认映射一个目录&lt;code&gt;/vagrant&lt;/code&gt;, 这个目录下执行chmod等是不起 作用的，因为它还在windows上，不支持linux文件权限。往里安装一个软件时，会有意想不到 的坑等着你，比如mysql的my.cnf配置就需要特殊的权限，否则mysql是启动不起来的。&lt;/p&gt;
&lt;p&gt;登录centos后，发现yum等都不能用，因为公司上网需要代理，所以要设置yum,wget的代理&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vi ~/.wgetrc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;use_proxy=yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http_proxy=proxy.xxx.com:8080&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ vi /etc/yum.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;proxy=http://proxy.xxx.com:8080&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最后就是在centos上把&lt;code&gt;.vimrc&lt;/code&gt;简单配置下。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;set nocp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set ts=4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set sw=4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set smarttab&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set et&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set nu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set ambiwidth=double&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filetype plugin indent on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set encoding=UTF-8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set langmenu=zh_CN.UTF-8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;language message zh_CN.UTF-8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set fileencodings=ucs-bom,utf-8,cp936,gb18030,big5,euc-jp,euc-kr,latin1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set fileencoding=utf-8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;好了，基本搞定开发环境了，可以愉快的在centos上玩耍了。&lt;/p&gt;
&lt;p&gt;参考链接&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/astaxie/Go-in-Action/blob/master/ebook/zh/01.2.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Vgrant安装配置&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在公司申请了新的笔记本，要重新初始化一套新的环境，这几年都习惯了&lt;code&gt;Putty+Vim&lt;/code&gt;开发 ，
但新笔记本默认装了windows，所以得先把linux安装起来，虚拟机就用VirtualBox, 
虚拟机管理用Vagrant，方便管理，打包的镜像也方便移
    
    </summary>
    
    
      <category term="vagrant" scheme="http://blog.ihuhao.com/tags/vagrant/"/>
    
      <category term="centos" scheme="http://blog.ihuhao.com/tags/centos/"/>
    
      <category term="putty" scheme="http://blog.ihuhao.com/tags/putty/"/>
    
      <category term="cmder" scheme="http://blog.ihuhao.com/tags/cmder/"/>
    
      <category term="vim" scheme="http://blog.ihuhao.com/tags/vim/"/>
    
  </entry>
  
</feed>
