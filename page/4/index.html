<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>蛙蛙池塘</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="蛙蛙池塘">
<meta property="og:url" content="http://blog.ihuhao.com/page/4/index.html">
<meta property="og:site_name" content="蛙蛙池塘">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="蛙蛙池塘">
  
    <link rel="alternative" href="/atom.xml" title="蛙蛙池塘" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/avatar.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/images/avatar.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">onlytiancai</a></h1>
		</hgroup>

		
		<p class="header-subtitle">欢迎来到蛙蛙池塘</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/onlytiancai" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/onlytiancai" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
								<a class="mail" target="_blank" href="mailto:onlytiancai@gmail.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/centos/" style="font-size: 10px;">centos</a> <a href="/tags/cmder/" style="font-size: 10px;">cmder</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/putty/" style="font-size: 10px;">putty</a> <a href="/tags/vagrant/" style="font-size: 10px;">vagrant</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a> <a href="/tags/主机迁移/" style="font-size: 10px;">主机迁移</a> <a href="/tags/监控/" style="font-size: 10px;">监控</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.dnspod.cn/">DNSPod</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.qcloud.com/">腾讯云</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">碧云天，黄花地，西风紧。北雁南飞。晓来谁染霜林醉？总是离人泪。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">onlytiancai</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/images/avatar.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">onlytiancai</h1>
			</hgroup>
			
			<p class="header-subtitle">欢迎来到蛙蛙池塘</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/onlytiancai" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/onlytiancai" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
						<a class="mail" target="_blank" href="mailto:onlytiancai@gmail.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-基金知识整理" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/05/20/基金知识整理/" class="article-date">
  	<time datetime="2022-05-20T05:35:15.000Z" itemprop="datePublished">2022-05-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/20/基金知识整理/">基金知识整理</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="真的是，跌的越多就涨的越好吗？"><a class="header-anchor" href="#真的是，跌的越多就涨的越好吗？">¶</a>真的是，跌的越多就涨的越好吗？</h2>
<p><a href="https://mp.weixin.qq.com/s/aBYGwKIN9mJEUfTF1M1hJw" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/aBYGwKIN9mJEUfTF1M1hJw</a></p>
<p><img src="https://blog-1251103437.cos.ap-beijing.myqcloud.com/202205201341124.png" alt></p>
<p>在熊市期间回撤控制能力强的基金，后面也涨的更好，而熊市期间回撤幅度最大，后市仍然是表现最差的那部分基金，并没有表现出蹲得越深，跳得越高的特征。</p>
<hr>
<h2 id="基金规模会影响反弹收益吗"><a class="header-anchor" href="#基金规模会影响反弹收益吗">¶</a>基金规模会影响反弹收益吗</h2>
<p><img src="https://blog-1251103437.cos.ap-beijing.myqcloud.com/202205201351884.png" alt></p>
<p>规模较小的基金在熊市阶段控制回撤能力方面略有优势，这可能得益于小规模基金具备更灵活的操作的条件，而规模过大的基金则显得尾大不掉，尤其是在遭遇长时间熊市环境，大规模基金在回撤控制方面整体不如规模较小基金；</p>
<p>不论是熊市底部以来的绝对收益还是相对性价比指标来看，50亿以下基金整体表现都更优，尤其是2-10亿与10-50亿两个规模区间的基金表现最为优异，适中偏低规模的基金可能更适合作为底部布局的选项。</p>
<hr>
<h2 id="什么类型的基金更适合底部布局？"><a class="header-anchor" href="#什么类型的基金更适合底部布局？">¶</a>什么类型的基金更适合底部布局？</h2>
<p><img src="https://blog-1251103437.cos.ap-beijing.myqcloud.com/202205201348786.png" alt></p>
<p>整体而言，指增基金在两轮熊市底部以来的行情中表现都是比较优秀的，是一款性价比较优的布局工具。</p>
<hr>
<p>我们认为一个比较适合当下进行底部布局的基金或许具有以下组合特征：</p>
<pre><code>适中的规模（2-50亿）+ 最低回撤的一批基金 + 指增基金
</code></pre>
<hr>
<h2 id="中国互联网"><a class="header-anchor" href="#中国互联网">¶</a>中国互联网</h2>
<p>中庚基金的丘栋荣在最近的一次直播中提到了互联网行业的机会，他说现在中国互联网行业满足了他投资体系中三个重要的标准：低风险、低估值、高成长性。</p>
<p>跟踪中国互联网行业的被动指数主要有三个：中国互联网30、中国互联网50、恒生科技。</p>
<p>二者最大的区别就是成分股的权重不同，中国互联网50指数更侧重于阿里和腾讯两家巨头企业，两家合计占到了53%的权重。而中国互联网30指数就更加的均衡一些，阿里和腾讯的占比在31%左右，其他的几家互联网公司就获得了更多的占比，比如京东、网易、百度等等。</p>
<p>恒生科技不同于上面的两个指数，恒生科技只有港股，并且也不只有互联网行业，还包括其它在港股市场上市的高科技公司，覆盖的行业更广泛一些。</p>
<p><img src="https://blog-1251103437.cos.ap-beijing.myqcloud.com/202205201713993.png" alt></p>
<p>在具体的投资方式上，目前比较推荐大家采取“底仓+定投”的方式。对于风险承受能力偏低的投资者们，底仓可以选择20%-30%左右，就是如果打算在互联网行业总共投入1万元的话，底仓建立应该用2000至3000元左右，然后再坚持定投。对于风险承受能力较高的投资者，底仓可以选择30%-50%左右。</p>
<hr>
<h2 id="沪深-300-最大回撤"><a class="header-anchor" href="#沪深-300-最大回撤">¶</a>沪深 300 最大回撤</h2>
<p><img src="https://blog-1251103437.cos.ap-beijing.myqcloud.com/202205201718402.png" alt></p>
<p>认清楚市场的本质并摆正心态是长期投资中非常重要的一环，在市场大跌的时候不慌乱，帮助我们拿得住牛基。如果能在克服了自己心魔的情况下，再勇敢的迈出一步，在市场下跌很深的情况下选择加仓，那么最后获取的收益也就更高。</p>
<p><img src="https://blog-1251103437.cos.ap-beijing.myqcloud.com/202205201719907.png" alt></p>
<p>长期来看，伴随着市场每一次深度回调的，就是一次又一次猛烈的上涨。其中，反弹幅度最大的一次是2012年12月4日到2015年6月12日，偏股混合型基金指数累计上涨182.39%，区间年化收益达52.92%。</p>
<p>买在半山腰怎么办？</p>
<p><img src="https://blog-1251103437.cos.ap-beijing.myqcloud.com/202205201723926.png" alt></p>
<p>在自己拥有充裕的可投资资金的情况下，可以选择加仓。还是要根据自己的风险承受能力和仓位管理来做是否加仓的决定，投资过程尽可能的平滑舒适才是最重要的。</p>
<p>我们其实活在一个“运动中平衡”的世界，没有只涨不跌的市场，也没有只跌不涨的市场。投资过程中，最重要的是认清市场和波动的本质，让自己保持一个较为积极的心态，尽可能的摒弃一蹴而就和精确抄底的思维。</p>
<p>我们总说长期投资这里好那里好，其实不是我们多么热衷于放弃资金的流动性，买在一个资产里很多年不动。而是大多数情况下，只有长期投资才能收获更高的回报。长期投资不是目的，而是手段。</p>
<hr>
<h2 id="基金止盈止损"><a class="header-anchor" href="#基金止盈止损">¶</a>基金止盈止损</h2>
<p><a href="https://mp.weixin.qq.com/s/PoAdTpH2lscjjVG1KlXA_g" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/PoAdTpH2lscjjVG1KlXA_g</a></p>
<p>一般主动管理基金，只要基金本身没问题，就建议长期持有，因为长期看净值会持续向上。</p>
<p>高位止盈的方法：</p>
<ol>
<li>根据股债利差做大的择时，当股票性价比很低的时候卖出，性价比很高的时候买入。</li>
<li>估值法。低估（估值百分位低于20%）买入，高估（估值百分位高于80%）卖出。行业基金参考对应行业指数的估值，均衡型基金可以参考大盘指数的估值，或者基金主要布局行业的估值。</li>
<li>目标收益法。偏股基金的长期年化回报是15%左右，其实想想，我们每年能获得15%的收益已经很不错了，所以在投资的时候也可以保持一份理性和克制，给自己设定一个目标，达到年化15%就收手。在定投的情况下，不能说，我才投了两个月达到15%的回报就卖出，这时你的筹码还太少，止盈没有意义，至少要定投了半年后再考虑止盈的事。</li>
<li>最大回撤法止盈。这个是目标收益法的升级版，如果市场很好，确实很难做到赚15%就撤，那可以考虑继续持有，但一旦出现回撤就该卖出。比如，赚15%的时候先不卖，如果净值继续上涨，赚20%之后出现回撤，那么可以考虑回撤3%卖出。卖出时也可以灵活采用一次性卖出或者分批卖出。</li>
</ol>
<p>这四种方法都比较好操作，其他还有一些方法，比如利用均线偏离度等技术指标判进行择时，通过投资者参与热度判断市场位置等，操作起来有些难度，就不多介绍了。</p>
<p>低位止损就是割肉，割在地板上就太亏了，所以一般投资止盈不止损。但以下几种情况要考虑止损。</p>
<ol>
<li>基金基本面变差。比如，基金规模暴涨后，基金经理的投资策略、风格发生漂移，业绩变差。或者债券基金经理踩雷，净值出现暴跌等。</li>
<li>基金经理更换。倒不是说一经更换就立马换，还是要先观察一下，至少一个季度吧，看看接任基金经理的风格、业绩，同时了解一下ta的过往经验，如果与自己想要的风格和目标不符，就要考虑更换了。</li>
<li>买了不符合自己风险承受能力的基金。如果基金的波动和亏损情况让自己焦虑了，不能很好的生活了，那这项投资不要也罢。</li>
<li>基金清盘。当基金发布了清盘公告，不论赚钱还是亏钱，都应该及时卖出。</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-202205" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/05/19/202205/" class="article-date">
  	<time datetime="2022-05-19T03:11:02.000Z" itemprop="datePublished">2022-05-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/19/202205/">202205</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>GTP-3算法是一种“暴力美学”的胜利: <a href="https://blog.csdn.net/mujie2015/article/details/115472443" target="_blank" rel="noopener">https://blog.csdn.net/mujie2015/article/details/115472443</a></p>
<p>李志飞把 GPT-3 形容为“一位科科都是高分的全才”。更让人激动的是，这么一个优秀的学生在学习过程中居然是无监督、完全自主驱动的，也就是学习过程它不需要人们提供有答案的练习题来复习测验（微调模型），只要给他无限多的文本序列，就能自动从文本里学到各种知识。</p>
<p>GPT-3 几乎是把整个互联网的浩瀚内容全部读完了。它总共阅读了大约 5000 亿词，模型大概有 1750 亿参数。系统有上万个 CPU/GPU 在 24 小时不间断地“阅读”任何领域的信息，半个月即可读完整个互联网的内容。猛灌数据量，是这个 AI 模型的“暴力”所在。</p>
<p>这个 GPT-3 这么神奇，他都能干什么？他其实可以做很多事情。比如他可以写作文，你给他开一个头，然后他就可以把整个文章写出来。而且他写出的文章句子非常通顺，更关键的是他段落之间逻辑也非常自洽。</p>
<p>网上有人把 GPT-3 写出来的文章和人类写出的文章给另外一个人判断，到底哪些机器写的，哪些是人类写的，其实人已经很难分出来了，所以他基本上可以以假乱真。</p>
<hr>
<p>Gitlab Handbook<br>
<a href="https://about.gitlab.com/handbook/" target="_blank" rel="noopener">https://about.gitlab.com/handbook/</a></p>
<hr>
<p>最近一周的数据</p>
<pre><code>WHERE created_at &gt;= DATE_SUB(CURDATE(), INTERVAL 7 DAY)  AND created_at &lt;=  CURDATE()
</code></pre>
<hr>
<h2 id="statsd"><a class="header-anchor" href="#statsd">¶</a>statsd</h2>
<p><a href="https://github.com/statsd/statsd/blob/master/docs/metric_types.md" target="_blank" rel="noopener">https://github.com/statsd/statsd/blob/master/docs/metric_types.md</a></p>
<p>statsd 的 Timing mertic 不错，能自动统计周期内数据的分位值，均值，累积，标准差等。</p>
<pre><code>glork:320|ms|@0.1
</code></pre>
<p>The glork took 320ms to complete this time. StatsD figures out percentiles, average (mean), standard deviation, sum, lower and upper bounds for the flush interval.</p>
<p><a href="https://blog.csdn.net/liuxiao723846/article/details/109036280" target="_blank" rel="noopener">https://blog.csdn.net/liuxiao723846/article/details/109036280</a></p>
<p>percentThreshold</p>
<p>对于timer数据，除了正常的统计之外还会计算一个百分比的数据（过滤掉峰值数据），默认是90%。可以通过percentThreshold修改这个值或配置多个值。例如在config.js中配置：</p>
<pre><code>//分别计算50%和80%的相关值
percentThreshold: [50, 80]
</code></pre>
<p>对于百分数相关的数据需要解释一下。以90为例，statsd会把一个flush期间上报的数据，去掉10%的峰值，即按大小取cnt*90%（四舍五入）个值来计算百分值。假如10s内上报以下10个值：</p>
<pre><code>1,3,5,7,13,9,11,2,4,8
</code></pre>
<p>则只取10*90%=9个值，则去掉13。百分值即按剩下的9个值来计算。</p>
<pre><code>$KEY.mean_90   // (1+3+5+7+9+2+11+4+8)/9
$KEY.upper_90  // 11
$KEY.lower_90  // 1
</code></pre>
<p>注：没有p99等指标。</p>
<hr>
<p>分析过程:我们调取了 2021 年全年，好买基金 APP 上全部用户自建基金组合的收益表现情况与公募 FOF 的收益情况进行比较发现:</p>
<ul>
<li>胜率方面: 2021 年实现正收益的自建基金组合占比为 50.9%，同期 95.83% 的 FOF 基金在 2021 年实现了正收益;</li>
<li>盈利能力方面:正收益的自建基金组合中，超 9 成收益集 中在 5% 以内，收益超过 5% 的自建组合占比仅为 3.66%; 同期，有 49.31% 的 FOF 基金收益在 5% 以内，有 45.83% 的FOF基金实现了 5% 以上的收益。</li>
</ul>
<p>大家怎么看公墓FOF和现在流行的投顾服务，感觉比自己瞎买基金靠谱很多呀，专业的事让专业的人做，选股，择时，仓位管理，止盈止损，再平衡，都不需要自己操心。</p>
<hr>
<p>一个类 Handler 有 3 个子类 AHandler, BHandler, CHandler 都有个 handle 方法。本来好好的，但突然 AHandler 支持批量操作了，有了一个 handleMany 方法。</p>
<p>下面哪个方案更好一些？</p>
<pre><code>方案 A：

Class Handler                                  方案 B：
    abstract def handleMany(items)
                                                   Class Handler
Class AHandler extend Handler                          abstract handleMany(items): void
    def handleMany(self, items):                       abstract handle(item): void
        for item in items:                             abstract supportMany(): bool
            self.handle(item)
                                                   def main():
    def handle(item)                                   items = getItems()
        # call one by one api                          handler = getHandler()
                                                       if handler.supportMany():
Class BHandler extend Handler                              handler.handleMany(items)
    def handleMany(items):                             else:
        # call bulk api                                    for item in items:
                                                               handler.handle(item)
def main():
    items = getItems();
    handler = getHandler();
    handler.handleMany(items)
</code></pre>
<hr>
<p>在线预览 office 文件, ppt, word, excel</p>
<pre><code>git clone  https://gitee.com/kekingcn/file-online-preview.git
cd file-online-preview
mvn clean package -DskipTests -Prelease
docker build -t keking/kkfileview .
# 修改样式
https://gitee.com/kekingcn/file-online-preview/blob/master/server/src/main/resources/web/ppt.ftl

docker run -it -p 0.0.0.0:8012:8012 keking/kkfileview
</code></pre>
<hr>
<p>Reddit算法分析 <a href="https://blog.csdn.net/yzllz001/article/details/54969248" target="_blank" rel="noopener">https://blog.csdn.net/yzllz001/article/details/54969248</a></p>
<p>这种算法的一个问题是，对于那些有争议的文章（赞成票和反对票非常接近），它们不可能排到前列。假定同一时间有两个帖子发表，文章A有1张赞成票（发帖人投的）、0张反对票，文章B有1000张赞成票、1000张反对票，那么A的排名会高于B，这显然不合理。</p>
<p>结论就是，Reddit的排名，基本上由发帖时间决定，超级受欢迎的文章会排在最前面，一般性受欢迎的文章、有争议的文章都不会很靠前。这决定了Reddit是一个符合大众口味的社区，不是一个很激进、可以展示少数派想法的地方。</p>
<hr>
<p>Snowflake 雪花算法 <a href="https://zhuanlan.zhihu.com/p/142123673" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/142123673</a></p>
<p>分布式系统中ID生成方案，比较简单的是UUID（Universally Unique Identifier，通用唯一识别码），但是其存在两个明显的弊端：</p>
<ul>
<li>一、UUID是128位的，长度过长；</li>
<li>二、UUID是完全随机的，无法生成递增有序的UUID。</li>
</ul>
<p>Snowflake 雪花算法，由Twitter提出并开源，可在分布式环境下用于生成唯一ID的算法。该算法生成的是一个64位的ID，故在Java下正好可以通过8字节的long类型存放。</p>
<p>Snowflake 雪花算法生成的ID不是随机的，而是按时间顺序升序排列的；且可以保证在分布式高并发环境下生成的ID不会发生重复</p>
<hr>
<p>How can I get past a “Repository is not signed…” message when attempting to upgrade Kali Linux from a mounted disk image?<br>
<a href="https://superuser.com/questions/1331936/how-can-i-get-past-a-repository-is-not-signed-message-when-attempting-to-upgr" target="_blank" rel="noopener">https://superuser.com/questions/1331936/how-can-i-get-past-a-repository-is-not-signed-message-when-attempting-to-upgr</a></p>
<p><code>apt-get install</code> 报错</p>
<pre><code>apt-get update --allow-unauthenticated
apt-get update --allow-insecure-repositories

deb [trusted=yes] file:/media/cdrom0 kali-rolling main contrib non-free
</code></pre>
<hr>
<p>彻底弄懂Redis的内存淘汰策略 <a href="https://zhuanlan.zhihu.com/p/105587132" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/105587132</a></p>
<p>Redis中的内存淘汰策略和过期删除策略 <a href="https://www.cnblogs.com/xiaowangbangzhu/p/16159367.html" target="_blank" rel="noopener">https://www.cnblogs.com/xiaowangbangzhu/p/16159367.html</a></p>
<p>有人往 redis 里放了大量的内容，还设置了永久不过期，需要设置内存淘汰策略，永久 key 也清理。</p>
<p>Redis中共有下面八种内存淘汰策略：</p>
<ul>
<li>volatile-lru：设置了过期时间的key使用LRU算法淘汰；</li>
<li>allkeys-lru：所有key使用LRU算法淘汰；</li>
<li>volatile-lfu：设置了过期时间的key使用LFU算法淘汰；</li>
<li>allkeys-lfu：所有key使用LFU算法淘汰；</li>
<li>volatile-random：设置了过期时间的key使用随机淘汰；</li>
<li>allkeys-random：所有key使用随机淘汰；</li>
<li>volatile-ttl：设置了过期时间的key根据过期时间淘汰，越早过期越早淘汰；</li>
<li>noeviction：默认策略，当内存达到设置的最大值时，所有申请内存的操作都会报错(如set,lpush等)，只读操作如get命令可以正常执行；</li>
</ul>
<hr>
<p><a href="https://github.com/hexojs/hexo-renderer-markdown-it" target="_blank" rel="noopener">https://github.com/hexojs/hexo-renderer-markdown-it</a></p>
<p>hexo 默认的 markdown 解析器，不支持标题自动加锚点，可以用这个插件来解决。</p>
<pre><code>$ npm un hexo-renderer-marked --save
$ npm i hexo-renderer-markdown-it --save
</code></pre>
<p>配置如下, 要启用 permalink ，在标题左边会加一个链接，分享这个链接，别人打开后可以直接定位到具体的位置。 另外 <code>level: 2</code> 表示二级标题才会生成链接，一级标题不会。</p>
<pre><code>markdown:
  preset: 'default'
  render:
    html: true
    xhtmlOut: false
    langPrefix: 'language-'
    breaks: true
    linkify: true
    typographer: true
    quotes: '“”‘’'
  enable_rules:
  disable_rules:
  plugins:
  anchors:
    level: 2
    collisionSuffix: ''
    permalink: true 
    permalinkClass: 'header-anchor'
    permalinkSide: 'left'
    permalinkSymbol: '¶'
    case: 0
    separator: '-'
</code></pre>
<hr>
<p>CloudWatch Logs Insights query syntax<br>
<a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/CWL_QuerySyntax.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/CWL_QuerySyntax.html</a></p>
<p>cloudwatch 查询语法中的几个常用指标聚合函数</p>
<ul>
<li>avg(fieldName: NumericLogField): The average of the values in the specified field.</li>
<li>count_distinct(fieldName: LogField): Returns the number of unique values for the field. If the field has very high cardinality (contains many unique values), the value returned by count_distinct is just an approximation.</li>
<li>pct(fieldName: LogFieldValue, percent: number): A percentile indicates the relative standing of a value in a dataset. For example, pct(@duration, 95) returns the @duration value at which 95 percent of the values of @duration are lower than this value, and 5 percent are higher than this value.</li>
<li>stddev(fieldName: NumericLogField): The standard deviation of the values in the specified field.</li>
</ul>
<hr>
<p>查看 mysql 的数据目录</p>
<pre><code>mysql&gt; show variables like '%datadir%';
+---------------+---------------------------+
| Variable_name | Value                     |
+---------------+---------------------------+
| datadir       | /data_xxx/mysql_data_dir/ |
+---------------+---------------------------+
1 row in set (0.00 sec)
</code></pre>
<hr>
<p>自建博客图床<br>
<a href="https://blog.csdn.net/dysonya/article/details/123569457" target="_blank" rel="noopener">https://blog.csdn.net/dysonya/article/details/123569457</a></p>
<p>PicGo<br>
<a href="https://github.com/Molunerfinn/PicGo/releases" target="_blank" rel="noopener">https://github.com/Molunerfinn/PicGo/releases</a><br>
<a href="https://picgo.github.io/PicGo-Doc/zh/guide/config.html" target="_blank" rel="noopener">https://picgo.github.io/PicGo-Doc/zh/guide/config.html</a></p>
<p>可以用阿里云 OSS 或 腾讯云 COS 做存储。配置腾讯云 COS 后，如果提示下面的错误，可尝试切换下 API 的版本，默认是 V5，切换到 V4 就能解决。</p>
<pre><code>StatusCodeError: 403 - &quot;You do not have permission to get URL 'xxx' from this server.&quot;
</code></pre>
<p>有一点不太好的地方就是 PicGo 帮助文档里写的是使用全局的 SecreId 和 SccreKey，权限上给的有点大，应该新建一个 CAM 子账户，设置只能访问某个对象存储的桶，并生成一对密钥访问 API 更安全一些。</p>
<p>测试一张图片</p>
<p><img src="https://blog-1251103437.cos.ap-beijing.myqcloud.com/202205201222029.jpg" alt></p>
<hr>
<h2 id="word-count"><a class="header-anchor" href="#word-count">¶</a>word count</h2>
<p>mysql 里如何统计一个字符串里某个字符出现的次数呢？<br>
<a href="https://bookofzeus.com/articles/mysql/count-the-number-of-occurrences-of-a-char-in-mysql/" target="_blank" rel="noopener">https://bookofzeus.com/articles/mysql/count-the-number-of-occurrences-of-a-char-in-mysql/</a></p>
<pre><code>mysql&gt; select `id`, `url`, LENGTH(`url`) - LENGTH(REPLACE(`url`, '/', '')) as `number` from `url`;
+----+-------------------------------+--------+
| id | url                           | number |
+----+-------------------------------+--------+
|  1 | http://www.thesunrisepost.com |      2 |
+----+-------------------------------+--------+
</code></pre>
<p>统计一个文本里单词个数</p>
<pre><code>mysql&gt; set @text=' aa bbb  cccc   ddddd ';select length(REGEXP_REPLACE(TRIM(@text), ' +', ' '))-length(REPLACE(REGEXP_REPLACE(TRIM(@text), ' +', ' '),' ','')) +1 word_count;
Query OK, 0 rows affected (0.00 sec)

+------------+
| word_count |
+------------+
|          4 |
+------------+
1 row in set (0.00 sec)
</code></pre>
<hr>
<h2 id="mysql-regex-replace"><a class="header-anchor" href="#mysql-regex-replace">¶</a>mysql regex replace</h2>
<p>How to do a regular expression replace in MySQL?<br>
<a href="https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql" target="_blank" rel="noopener">https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql</a></p>
<pre><code># for mariadb
SELECT REGEXP_REPLACE(&quot;stackoverflow&quot;, &quot;(stack)(over)(flow)&quot;, '\\2 - \\1 - \\3')
over - stack - flow

# for mysql 8.0
mysql&gt; SELECT REGEXP_REPLACE(&quot;stackoverflow&quot;, &quot;(stack)(over)(flow)&quot;, '$2 - $1 - $3');
+------------------------------------------------------------------------+
| REGEXP_REPLACE(&quot;stackoverflow&quot;, &quot;(stack)(over)(flow)&quot;, '$2 - $1 - $3') |
+------------------------------------------------------------------------+
| over - stack - flow                                                    |
+------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; SELECT IF('ABC1' REGEXP 'ABC[0-9]$','ABC','ABC1');
+--------------------------------------------+
| IF('ABC1' REGEXP 'ABC[0-9]$','ABC','ABC1') |
+--------------------------------------------+
| ABC                                        |
+--------------------------------------------+

mysqldump -u user -p database table &gt; dump.sql
find /path/to/dump.sql -type f -exec sed -i 's/old_string/new_string/g' {} \;
mysqlimport -u user -p database table &lt; dump.sql
</code></pre>
<hr>
<p>你可能在一个人面前，一文不值；却在另一个人面前，是无价之宝。做你自己，爱你的人，自然爱你。谨记自己的价值所在，这就是，人活着的道理。</p>
<p>—— 杨绛</p>
<p>投资中不要去追求完美，追求完美的人就算告诉你什么时候买卖你都会失败，因为你总想买在最低卖在最高，结果导致你不是踏空就是坐过山车！退而求其次方为可把握的正道。买在次低位，卖在次高位，我很满足，方可持续。</p>
<p>别人本质上是没办法让你自卑的。让你自卑的是你的想法或内在的自我攻击。</p>
<p>“少研究别人，多提升自己，不是成功来的慢，是你努力的不够狠，努力只能及格，拼命才能优秀。”</p>
<p>其实，大多数餐饮店，顾客根本不在意你装修啥样，弄那么多花样，根本不加分。吃的东西弄干净一点，桌子椅子方便就行，又不是当皇上来了，弄个死沉死沉的太师椅干啥啊？傻乎乎的。</p>
<p>人和人之间最大的差距，不是智商的差距，而是目标清晰度的差距。如果整天不知道自己想要什么，五迷三道，那么实际上是丧失了对生活的热忱。麻木僵硬，行尸走肉；虽然活着，但已经死了。简称：活死人。</p>
<p>我看过90年代的下岗潮、房地产泡沫、感受过08年股灾，从来没有看到过，像现在这么大的裁员、那么多店关闭，以及，今天又看到，这么多银行沦陷。从来没有。</p>
<p>形式很不好了，大家要保全实力：<br>
1、不要贷款<br>
2、不要高消费<br>
3、好好工作<br>
4、积极锻炼<br>
5、好好吃饭、好好睡觉<br>
6、不要借钱给别人<br>
7、不要和别人（包括同事）发生争执<br>
8、多读书、考证、练技能</p>
<p>想的时间越长，就越不想去干。 我猜是大脑对此太熟悉，就以为自己已经干过了。</p>
<p>每个人都有自己的长处，这句话小时候都听过吧？这句话的正确理解是，你总能找到一个方向，让你饿不死能混口饭吃，而不是你踢球不行换了体操就能打进世锦赛奥运会争金牌了。</p>
<p>你的孩子病了，你陷入了繁重的债务。接下来是家里的事，你的另一半花光了所有积蓄，留下孩子和一堆账单离开了你。就别再提什么去夜校学习了。在评价别人之前，要记住努力并不代表所有，而且每个人的努力也并非建立在同样公平的前提之上。——卡罗尔·德韦克《终身成长》</p>
<hr>
<h2 id="java-hello-world"><a class="header-anchor" href="#java-hello-world">¶</a>java hello world</h2>
<p>Java包的定义及使用<br>
<a href="https://www.jianshu.com/p/c798a019f2ec" target="_blank" rel="noopener">https://www.jianshu.com/p/c798a019f2ec</a></p>
<p>编码</p>
<pre><code>$ vi Hello.java
package com.ihuhao.demo;

public class Hello {
    public static void main(String args[]) {
        System.out.println(&quot;Hello world !&quot;);
    }
}
</code></pre>
<p>编译执行</p>
<pre><code>$ javac -d . Hello.java
$ tree
.
├── com
│   └── ihuhao
│       └── demo
│           └── Hello.class
├── Hello.java

$ java com.ihuhao.demo.Hello
</code></pre>
<p>打包执行</p>
<pre><code>$ jar -cvf my.jar com
$ rm com -rf
$ java -classpath './my.jar' com.ihuhao.demo.Hello
</code></pre>
<hr>
<h2 id="java-使用第三方库"><a class="header-anchor" href="#java-使用第三方库">¶</a>java 使用第三方库</h2>
<p>Maven Repository 网站搜索需要的 jar 包: <a href="https://mvnrepository.com/artifact/com.google.code.gson/gson" target="_blank" rel="noopener">https://mvnrepository.com/artifact/com.google.code.gson/gson</a></p>
<pre><code>$ mkdir lib
$ cd lib
$ wget https://repo1.maven.org/maven2/com/google/code/gson/gson/2.9.0/gson-2.9.0.jar
$ cd ..

$ vi GsonTest.java
package com.ihuhao.demo;

import java.util.HashMap;
import java.util.Arrays;
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

public class GsonTest {
    public static void main(String args[]) {
        Gson gson = new GsonBuilder().setPrettyPrinting().create();

        HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();
        map.put(&quot;name&quot;, &quot;wawa&quot;);
        map.put(&quot;age&quot;, 18);
        map.put(&quot;skills&quot;, Arrays.asList(&quot;吃饭&quot;, &quot;睡觉&quot;, &quot;打豆豆&quot;));

        String json  = gson.toJson(map);
        System.err.println(json);
    }
}

$ javac  -classpath './lib/gson-2.9.0.jar' -d . GsonTest.java
$ java -classpath '.:./lib/gson-2.9.0.jar' com.ihuhao.demo.GsonTest
{
  &quot;skills&quot;: [
    &quot;吃饭&quot;,
    &quot;睡觉&quot;,
    &quot;打豆豆&quot;
  ],
  &quot;name&quot;: &quot;wawa&quot;,
  &quot;age&quot;: 18
}
</code></pre>
<hr>
<p>本地编译的 java 程序，依赖的 JDK 库和编译时用的 java 编译器，都要和生产环境一致，否则运行时会报错。<br>
本地的 Tomcat 版本和 生成环境也要一致。</p>
<hr>
<h2 id="java-arrays"><a class="header-anchor" href="#java-arrays">¶</a>java arrays</h2>
<pre><code>import java.util.Arrays;

public class ArraysTest {
    public static void main(String[] args) {
        int[][] nums = {{1,2},{3,4}};
        System.out.println(Arrays.deepToString(nums));

        int a[] = new int[] { 18, 62, 68, 82, 65, 9 };
        Arrays.sort(a);
        System.out.println(Arrays.toString(a));
        System.out.println(&quot;数字 62出现的位置:&quot;+Arrays.binarySearch(a, 62));
    }
}
</code></pre>
<hr>
<h2 id="vim-开发-java"><a class="header-anchor" href="#vim-开发-java">¶</a>vim 开发 java</h2>
<p>常见的代码块快捷键：<code>.vim/plugged/vim-snippets/snippets/java.snippets</code></p>
<pre><code>im
    import java.util.; 
cl
    public class ArraysTest {

    }
main
    public static void main(String[] args) {

    }
sout 
    System.out.println(); 
d.al     
    List&lt;Object&gt; list = new ArrayList&lt;Object&gt;();
d.hm
    Map&lt;Object, Object&gt; map = new HashMap&lt;Object, Object&gt;();
</code></pre>
<p>设置 F5 编译运行</p>
<pre><code>$ vim ~/.vimrc
&quot; 当前文件为 java 时 F5 自动编译运行
autocmd FileType java nnoremap &lt;buffer&gt; &lt;F5&gt; :!javac %&amp;&amp;java %:r&lt;CR&gt;
</code></pre>
<p>vim 开发 java 最精简配置，写点测试代码，算法代码很方便。</p>
<hr>
<h2 id="vim-映射"><a class="header-anchor" href="#vim-映射">¶</a>vim 映射</h2>
<p>Vimscript 基本映射 <a href="https://www.w3cschool.cn/vim/mh1uyozt.html" target="_blank" rel="noopener">https://www.w3cschool.cn/vim/mh1uyozt.html</a></p>
<pre><code>&quot; 映射普通键
:map - x
&quot; 映射空格
:map &lt;space&gt; viw
&quot; 映射 ctrl + d
:map &lt;c-d&gt; dd
</code></pre>
<p>Vimscript 模式映射 <a href="https://www.w3cschool.cn/vim/n41ghozt.html" target="_blank" rel="noopener">https://www.w3cschool.cn/vim/n41ghozt.html</a></p>
<p>你可以使用nmap、vmap和imap命令分别指定映射仅在normal、visual、insert模式有效。</p>
<p>Vimscript 精确映射 <a href="https://www.w3cschool.cn/vim/sxjqcozt.html" target="_blank" rel="noopener">https://www.w3cschool.cn/vim/sxjqcozt.html</a></p>
<p>Vim提供另一组映射命令，这些命令创建的映射在运行时 不会 进行递归。</p>
<pre><code>:nmap x dd
:nnoremap \ x
</code></pre>
<p>每一个<em>map系列的命令都有个对应的</em>noremap命令，包括：noremap/nnoremap、 vnoremap和inoremap。这些命令将不递归解释映射的内容。</p>
<p>该何时使用这些非递归的映射命令呢？ 答案是： 任何时候 。</p>
<p>Vimscript Leaders <a href="https://www.w3cschool.cn/vim/8y7cnozt.html" target="_blank" rel="noopener">https://www.w3cschool.cn/vim/8y7cnozt.html</a></p>
<pre><code>:let mapleader = &quot;-&quot;
:nnoremap &lt;leader&gt;d dd
</code></pre>
<p>快捷键映射</p>
<pre><code>:nnoremap          &lt;leader&gt;d dd
:nnoremap &lt;buffer&gt; &lt;leader&gt;x dd
</code></pre>
<p><buffer>表示只在定义它的那个缓冲区中有效。</buffer></p>
<hr>
<h2 id="vim-命令大全"><a class="header-anchor" href="#vim-命令大全">¶</a>vim 命令大全</h2>
<p><a href="https://www.w3cschool.cn/vim/cjtr1pu3.html" target="_blank" rel="noopener">https://www.w3cschool.cn/vim/cjtr1pu3.html</a></p>
<p><img src="https://blog-1251103437.cos.ap-beijing.myqcloud.com/202205211354889.png" alt></p>
<p><img src="https://blog-1251103437.cos.ap-beijing.myqcloud.com/202205211356475.png" alt></p>
<hr>
<p>使用Zerotier+Moon结点内网穿透<br>
<a href="https://blog.csdn.net/it_LiChengwei/article/details/120934792" target="_blank" rel="noopener">https://blog.csdn.net/it_LiChengwei/article/details/120934792</a></p>
<p>zerotier定义了几个专业名词:<br>
PLANET 行星级的服务器，zerotier各地的根服务器，有日本、新加坡等地。<br>
MOON 卫星级服务器，用户自建的私有根服务器，起到中转加速的作用。<br>
LEAF 相当于各个枝叶，就是每台连接到该网络的机器节点。</p>
<p>使用VPS免费搭建Zerotier Moon<br>
<a href="https://zhuanlan.zhihu.com/p/405979685" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/405979685</a></p>
<p>Zerotier可以组建P2P直连虚拟局域网，你可以在公司使用微软自带的远程连接直连自己公司的电脑，访问共享远程控制等。想要P2P访问必须先通过一个中继服务器握手或者转发流量，官方节点速度很慢，所以最好自己搭建Moon节点中继。</p>
<p>Moon节点要求不能DDNS，所以家里公网IP也没法搭，而且由于P2P不成功的话，必需通过Moon中继流量，所以最好使用国内的VPS。</p>
<hr>
<h2 id="jetty"><a class="header-anchor" href="#jetty">¶</a>jetty</h2>
<p><a href="https://www.cnblogs.com/yiwangzhibujian/p/5832597.html" target="_blank" rel="noopener">Jetty 使用教程</a></p>
<p>Jetty 是一个提供 HTTP 服务器、HTTP 客户端和 javax.servlet 容器的开源项目。</p>
<pre><code>export JETTY_HOME=&quot;/home/ubuntu/download/jetty-distribution-9.4.46.v20220331&quot;
cd $JETTY_HOME/demo-base/
java -jar $JETTY_HOME/start.jar
java -jar $JETTY_HOME/start.jar --list-modules
java -jar %JETTY_HOME/start.jar --list-config

JETTY_BASE=/tmp/mybase
mkdir $JETTY_BASE
java -jar $JETTY_HOME/start.jar --add-to-startd=http,deploy
cp $JETTY_HOME/demo-base/webapps/async-rest.war webapps/ROOT.war
java -jar $JETTY_HOME/start.jar
</code></pre>
<p><a href="https://blog.csdn.net/k393393/article/details/93602586" target="_blank" rel="noopener">jetty、jetty原理、jetty与tomcat区别</a></p>
<p>jetty特点</p>
<ul>
<li>jetty是异步的，支持更高的并发量</li>
<li>jetty更灵活，更加轻量，更容易定制，更高的资源利用率</li>
<li>Jetty 默认采用的 NIO 模型，jetty能很好支持长链接</li>
<li>集成简单，应用只要集成jetty，应用就可以快速支持 http 服务</li>
</ul>
<p>jetty与tomcat区别</p>
<ul>
<li>Jetty 比 Tomcat 架构更加简单。
<ul>
<li>jetty的所有组件都是基于 Handler 来实现，它的主要功能扩展都可以用 Handler 来实现；</li>
<li>Tomcat 的整体设计上很复杂，tomcat是基于容器的架构，开发者要想扩展tomcat功能就需要了解tomcat架构，遵循tomcat的规范。</li>
</ul>
</li>
<li>jetty比较容易扩展第三方框架，所以也跟容易定制</li>
<li>jetty更加轻量可以节省内存</li>
<li>tomcat更加稳定、更加成熟，在企业级中占有率很大</li>
</ul>
<hr>
<h2 id="C-语言计时"><a class="header-anchor" href="#C-语言计时">¶</a>C 语言计时</h2>
<p><a href="https://blog.csdn.net/fz_ywj/article/details/8109368" target="_blank" rel="noopener">https://blog.csdn.net/fz_ywj/article/details/8109368</a></p>
<ul>
<li><code>time_t time(time_t * timer)</code>:
<ul>
<li>C 标准库中的函数，可移植性最好，性能也很稳定，但精度太低，只能精确到秒，对于一般的事件计时还算够用，而对运算时间的计时就明显不够用了。</li>
<li>用 difftime 函数可以计算两个 time_t 类型的时间的差值，可以用于计时。用 difftime(t2,t1) 要比 t2-t1 更准确，因为 C 标准中并没有规定 time_t 的单位一定是秒，而 difftime 会根据机器进行转换，更可靠。</li>
</ul>
</li>
<li><code>clock_t clock(void)</code>:
<ul>
<li>该函数返回值是硬件滴答数，要换算成秒，需要除以 CLOCKS_PER_SEC。</li>
<li>可以精确到毫秒，适合一般场合的使用。</li>
</ul>
</li>
<li><code>int gettimeofday(struct timeval *tv,struct timezone *tz);</code>
<ul>
<li>其参数tv是保存获取时间结果的结构体，参数tz用于保存时区结果（若不使用则传入NULL即可）。</li>
<li>使用这种方式计时，精度可达微秒。经验证，在arm+linux的环境下此函数仍可使用。推荐。</li>
</ul>
</li>
</ul>
<p>code</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">time_t</span> start1, end1;</span><br><span class="line">    start1 = time(<span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">300000000</span>; ++i) <span class="built_in">sqrt</span>(i);</span><br><span class="line">    end1 = time(<span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"time=%f\n"</span>, difftime(end1, start1));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">clock_t</span> start2, end2;</span><br><span class="line">    start2 = clock();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">300000000</span>; ++i) <span class="built_in">sqrt</span>(i);</span><br><span class="line">    end2 = clock();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"time2=%f\n"</span>,(<span class="keyword">double</span>)(end2-start2)/CLOCKS_PER_SEC);</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">timeval</span> <span class="title">start3</span>, <span class="title">end3</span>;</span></span><br><span class="line">    gettimeofday(&amp;start3, <span class="literal">NULL</span> );</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">300000000</span>; ++i) <span class="built_in">sqrt</span>(i);</span><br><span class="line">    gettimeofday(&amp;end3, <span class="literal">NULL</span> );</span><br><span class="line">    <span class="keyword">long</span> timeuse =<span class="number">1000000</span> * (end3.tv_sec - start3.tv_sec ) + end3.tv_usec - start3.tv_usec;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"time3=%f\n"</span>,timeuse /<span class="number">1000000.0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ gcc <span class="number">042.</span>c -lm &amp;&amp; ./a.out</span><br><span class="line">time=<span class="number">3.000000</span></span><br><span class="line">time2=<span class="number">2.407064</span></span><br><span class="line">time3=<span class="number">2.460698</span></span><br></pre></td></tr></table></figure>
<hr>
<p>把这句翻译成英文：这是小明做的我们和其它公司收入的对比结果。</p>
<ul>
<li>youdao: This is the result of comparing our revenue with that of other companies made by Xiaoming.</li>
<li>youdao2: This is xiao Ming do we and other comparison results of the company’s revenues.</li>
<li>baidu: This is the result of Xiaoming’s comparison of our income with that of other companies.</li>
<li>deepl: This is the result of the comparison of our revenue with other companies made by Xiaoming.</li>
<li>google：This is Xiao Ming’s comparison of our revenue with other companies.</li>
<li>bing：This is the result of Bob’s comparison of our revenue with other companies.</li>
<li>a: This is a revenue comparison made by Xiaoming between our company and other companies.</li>
<li>b: this is the result of compare of our and other companies on revenue which is  by xiaoming.</li>
</ul>
<p>大家觉得哪个翻译的好一些。</p>
<hr>
<p>Nix 会超越 Docker 吗？<a href="https://www.163.com/dy/article/H5QCFQGO0511FQO9.html" target="_blank" rel="noopener">https://www.163.com/dy/article/H5QCFQGO0511FQO9.html</a></p>
<ul>
<li>Docker 镜像只是 Docker 提供的一小部分，Docker 为整个容器生态系统提供了工具。 而 Nix 的设计旨在构建可重现的包和环境。</li>
<li>如果你的目的是构建可重现的开发环境，则选用 Nix 更合适。</li>
<li>如果你希望寻找一种方法来构建、打包和部署自己的服务，则 Docker 提供的更丰富的工具更适合你。毕竟，容器乃是如今部署 Web 服务的标准方式。</li>
</ul>
<p>Nix从0到0.1（神奇的包管理工具）<a href="https://zhuanlan.zhihu.com/p/392711598" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/392711598</a></p>
<ul>
<li>Nix作为一个包管理工具，不仅仅完成了管理包的职能，还兼具了快速搭建环境、创建不同版本开发环境的职能，对于需要同一开发工具的同学来说也算是一个很有用的地方吧。</li>
<li>对同一环境会有对应的历史记录，支持版本回滚。</li>
<li>Nix支持环境配置文件的编写，在任何一台装有Nix的机器上面都可以实现环境的完美复原，对外部的依赖只有Nix，而且对本身系统所安装的东西影响几乎为零，在我看来安全性也是有所保证的。</li>
</ul>
<hr>
<p>Postgresql关于wal日志总结，一文搞清楚它的所有概念和相关操作<br>
<a href="https://blog.csdn.net/lusklusklusk/article/details/123603833" target="_blank" rel="noopener">https://blog.csdn.net/lusklusklusk/article/details/123603833</a></p>
<p>简单地说，WAL的核心概念是，对数据文件(表和索引所在的地方)的更改必须在写入了日志文件后这些更改之后才可以写入数据文件，也就是说，描述更改的日志记录被刷新到永久存储之后才可以写数据文件。</p>
<p>使用WAL可以显著减少磁盘写操作的数量，因为只需要将日志文件刷新到磁盘以确保提交事务，而不是事务更改的每个数据文件。日志文件是按顺序写入的，因此同步日志的成本要比刷新数据页的成本低得多。</p>
<p>备注：数据库将脏数据刷到数据文件上,这个动作是随机I/O,性能比写日志的顺序I/O差太多</p>
<p>总结</p>
<ul>
<li>WAL即Write Ahead Log预写式日志,简称wal日志,相当于oracle中的redo日志。只是oracle中redo是固定几个redo日志文件,然后轮着切换去写入。pg中wal日志是动态切换,单个wal日志写满继续写下一个wal日志，连续不断生成wal日志。</li>
<li>单个WAL文件的大小,默认为16MB,参数是wal_segment_size,可以理解为PG把Wal日志存储到N个大小为16M(默认值)的WAL segment file,一般不做更改</li>
<li>如果使用了 WAL 归档，旧的段在被归档之前不能被不能删除或回收，直到它们被归档。如果WAL归档跟不上WAL生成的速度，或者archive_command重复失败，旧的WAL文件将在pg_wal中累积，直到问题解决。</li>
<li>如果max_wal_size和wal_keep_segments没起作用导致wal_pg目录下面的wal日志文件不自动删除从而越来越多，原因主要是负载过重、archive_command失败或wal_keep_segments设置过高</li>
<li>正常情况下pg_wal目录下的wal文件为在线WAL日志，不能删除，删除后如果遇到数据库重启则会丢失数据</li>
<li>pg_wal日志没有设置保留周期的参数，即没有类似mysql的参数expire_logs_days，在检查点之后，当旧的wal日志文件不再需要时，它们将被删除或回收(按编号顺序重命名为将来的段)。</li>
<li>PostgreSQL在写入频繁的场景中，会产生大量的WAL日志，而且WAL日志量会远远超过实际更新的数据量，这就叫做“WAL写放大”，产生的原因主要有以下两点。说个题外话当年Uber也是这个原因之一把pg切换成了mysql，参见https://eng.uber.com/postgres-to-mysql-migration/
<ul>
<li>full page writes，PostgreSQL会在一个checkpoint检查点之后的页面的第一次修改期间将每个页面的全部内容写到Wal文件</li>
<li>update时如果新记录位置发生变更，索引记录也要相应变更，这个变更也要记入WAL。而索引记录的变更又有可能导致索引页的全页写，进一步加剧了把内容写到Wal文件。</li>
</ul>
</li>
</ul>
<p>PostgreSQL之wal_keep_segments参数<br>
<a href="https://blog.csdn.net/qq_35462323/article/details/115381735" target="_blank" rel="noopener">https://blog.csdn.net/qq_35462323/article/details/115381735</a></p>
<hr>
<p>what does %WCPU column mean in TOP output ?<br>
<a href="https://community.hpe.com/t5/HP-UX-General/what-does-WCPU-column-mean-in-TOP-output/td-p/3011779" target="_blank" rel="noopener">https://community.hpe.com/t5/HP-UX-General/what-does-WCPU-column-mean-in-TOP-output/td-p/3011779</a></p>
<p>%WCPU is “Weighted CPU (central processing unit) percentage”</p>
<p>%CPU is “Raw CPU percentage. This field is used to sort the top processes”.</p>
<p>The %WCPU is just a ‘forecast’ value for the process. It really has no real world value. It’s value is totally controlled by the scheduler.</p>
<p>The man page for top(1) indicates that %CPU is the “Raw CPU percentage. This field is used to sort the top processes”.</p>
<p>Well, the %CPU is the total percentage without the ‘forecast’ factor built-in, such as a ‘raw value.’</p>
<hr>
<p>PostgreSQL 如何查找TOP SQL (例如IO消耗最高的SQL)<br>
<a href="https://blog.csdn.net/weixin_34102807/article/details/90588528" target="_blank" rel="noopener">https://blog.csdn.net/weixin_34102807/article/details/90588528</a></p>
<p>资源分为多个维度，CPU，内存，IO等。如何能了解各个维度层面的TOP SQL呢？</p>
<p>pg_stat_statements插件可以用于统计数据库的资源开销，分析TOP SQL。</p>
<hr>
<h2 id="一分钟抓一次耗费CPU最高的进程"><a class="header-anchor" href="#一分钟抓一次耗费CPU最高的进程">¶</a>一分钟抓一次耗费CPU最高的进程</h2>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> cat cron_cpu_stat.sh</span><br><span class="line">date</span><br><span class="line">ps -Ao pid,pcpu,pmem,cmd --sort=-pcpu | head -n 10</span><br><span class="line">echo '==================='</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> sudo touch /var/log/cpu_stat.log</span><br><span class="line"><span class="meta">$</span> sudo chown $USER /var/log/cpu_stat.log</span><br><span class="line"><span class="meta">$</span> ls -l /var/log/cpu_stat.log</span><br><span class="line"><span class="meta">$</span> crontab -l</span><br><span class="line">* * * * * cd /home/ubuntu &amp;&amp; bash cron_cpu_stat.sh &gt;&gt; /var/log/cpu_stat.log 2&gt;&amp;1</span><br><span class="line"><span class="meta">$</span> tail -f /var/log/cpu_stat.log</span><br></pre></td></tr></table></figure>
<hr>
<p>How to Check Cron Logs on Ubuntu 18.04<br>
<a href="https://linoxide.com/check-cron-logs-ubuntu/" target="_blank" rel="noopener">https://linoxide.com/check-cron-logs-ubuntu/</a></p>
<p>ubuntu 上单独查看 crontab 的日志</p>
<pre><code>sudo vi  /etc/rsyslog.d/50-default.conf

    cron.* /var/log/cron.log

sudo systemctl restart rsyslog

tail -f /var/log/cron.log
</code></pre>
<hr>
<p>一组语料，如何提取出现频率最高的短语，而不是单词，比如</p>
<p>good morning Sir.<br>
good morning teacher.<br>
good morning class.<br>
good afternoon Sir.<br>
good afternoon teacher.</p>
<p>我要得到出现次数最多的 top 2 的短语 “good morning” 和 “good afternoon”<br>
而不是出现次数最多的 top 2 的单词 “good” 和 “morning”</p>
<p>算法复杂度大概是多少？</p>
<hr>
<p>计算一组数据的分散程度</p>
<p>How to Calculate the Coefficient of Variation in Python<br>
<a href="https://www.statology.org/coefficient-of-variation-in-python/" target="_blank" rel="noopener">https://www.statology.org/coefficient-of-variation-in-python/</a></p>
<p>Python统计学（四）——离散性测度<br>
<a href="https://zhuanlan.zhihu.com/p/344919136" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/344919136</a></p>
<ul>
<li>极差的概念很容易理解，一个样本中最大与最小观测值之间的差异称为极差（range）</li>
<li>平均离差就是样本中全部数值与它们均值变动的平均数量来度量离散程度。</li>
<li>分位数也叫百分位数，最常使用的有四分位数（25，50，75），五分位数（20，40，60，80）和百分位数（10，20，30，…，90）。</li>
<li>方差和标准差是日常统计中应用非常广泛而且频繁的指标之一</li>
<li>方差的量纲是原数据量纲的平方，标准差的量纲跟原数据的量纲是一样的，这就是为什么标准差运用得比方差更广泛。但是，在不同量纲的数据之间做比较时，标准差就不能使用了，因为单位都不一样，不用简单作比较。这个时候变异系数（coefficient of variation, CV）就派上用场了。变异系数就是标准差除以均值的百分比，变异系数是一个无量纲的值。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.std([<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>])</span><br><span class="line"><span class="number">0.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.std([<span class="number">8</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>])</span><br><span class="line"><span class="number">3.0983866769659336</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.median([<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>])</span><br><span class="line"><span class="number">2.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.median([<span class="number">8</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>])</span><br><span class="line"><span class="number">0.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cv = <span class="keyword">lambda</span> x: np.std(x, ddof=<span class="number">1</span>) / np.mean(x) * <span class="number">100</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cv([<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>])</span><br><span class="line"><span class="number">0.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cv([<span class="number">8</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>])</span><br><span class="line"><span class="number">173.20508075688772</span></span><br></pre></td></tr></table></figure>
<p>Python统计学（三）——位置测度<br>
<a href="https://zhuanlan.zhihu.com/p/344780317" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/344780317</a></p>
<ul>
<li>样本均值（算术平均数）</li>
<li>加权平均数是算术平均数的一种特殊情形。当有几个相同数值的观测值时，算术平均数就会变成加权平均数。</li>
<li>中位数：将一组数据从最小到最大、或者从最大到最小排序以后，位于中点的数值。</li>
<li>众数：在一个样本的所有观察值中，发生频率最大的一个值称为样本的众数。</li>
<li>几何平均数在商业、工业、金融当中应用非常广泛，特别是涉及到随时间推移的平均变动时，几何平均数就派上用场。比如计算营业额增长率、复利、GDP等。</li>
<li>调和平均数仅适合于有限数量的应用情形，比如计算股票的平均成本等。它是对于观测值的倒数进行求和后再求平均，最后将平均值求倒数后得到。</li>
</ul>
<p>Python统计学（五）——切比雪夫、偏度及峰度<br>
<a href="https://zhuanlan.zhihu.com/p/346810231" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/346810231</a></p>
<ul>
<li>当得知样本观察值呈正态分布时，可以用前面的正态经验法则来评估数据大约有多大比例集中在什么范围内；当然，如果不清楚数据分布情况，或者数据分布不是正态分布，那么我们可以利用切比雪夫定理来做评估。</li>
<li>一个分布如果不对称，则被称为偏度。分布有对称、正偏（右偏）、负偏（左偏）。正偏的分布表现出右侧长尾，负偏的分布具有左侧长尾。正偏的单峰分布，其众数要小于中位数，而中位数又小于均值；负偏的单峰分布刚好相反。</li>
<li>一个分布如果不对称，则被称为偏度。分布有对称、正偏（右偏）、负偏（左偏）。正偏的分布表现出右侧长尾，负偏的分布具有左侧长尾。正偏的单峰分布，其众数要小于中位数，而中位数又小于均值；负偏的单峰分布刚好相反。</li>
<li>峰度是一个统计度量指标，它告诉我们一个分布的峰值比正态分布更高还是更低。标准差越小，曲线越陡；标准差越大，曲线越平缓。</li>
<li>一个分布的峰值如果比正态分布要大，称其为尖峰的（leptokurtic），一个分布的峰度如果等于正态分布，称其为中峰的（mesokurtic），一个分布的峰度如果比正态分布要小，称其为低峰的（platykurtic）。</li>
<li>对于所有正态分布来说峰度等于3，许多统计软件会给出超额峰度（excess kurtosis），也就是峰度减去3之后的值。一个正态分布或者其他中峰分布的超额峰度为0， 一个尖峰分布的超额峰度大于0，一个低峰分布的超额峰度小于0。</li>
<li>标准差会影响正态分布曲线的高度，值均的不同会让曲线进行左右平移。</li>
</ul>
<hr>
<p>Statsmodels 统计包之 OLS 回归<br>
<a href="https://blog.csdn.net/qq_17119267/article/details/79108333" target="_blank" rel="noopener">https://blog.csdn.net/qq_17119267/article/details/79108333</a></p>
<p>jupyter 里输出表格</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> IPython.display <span class="keyword">import</span> HTML, display</span><br><span class="line"><span class="keyword">import</span> tabulate</span><br><span class="line">table = [[<span class="string">"Sun"</span>,<span class="number">696000</span>,<span class="number">1989100000</span>],</span><br><span class="line">         [<span class="string">"Earth"</span>,<span class="number">6371</span>,<span class="number">5973.6</span>],</span><br><span class="line">         [<span class="string">"Moon"</span>,<span class="number">1737</span>,<span class="number">73.5</span>],</span><br><span class="line">         [<span class="string">"Mars"</span>,<span class="number">3390</span>,<span class="number">641.85</span>]]</span><br><span class="line">display(HTML(tabulate.tabulate(table, tablefmt=<span class="string">'html'</span>)))</span><br></pre></td></tr></table></figure>
<p>How do I output lists as a table in Jupyter notebook?<br>
<a href="https://newbedev.com/how-do-i-output-lists-as-a-table-in-jupyter-notebook" target="_blank" rel="noopener">https://newbedev.com/how-do-i-output-lists-as-a-table-in-jupyter-notebook</a></p>
<p>tabulate：在 Python 中可如此优雅地创建表格<br>
<a href="https://zhuanlan.zhihu.com/p/485136394" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/485136394</a></p>
<hr>
<p>How we improved DNS record build speed by more than 4,000x<br>
<a href="https://blog.cloudflare.com/dns-build-improvement/" target="_blank" rel="noopener">https://blog.cloudflare.com/dns-build-improvement/</a></p>
<hr>
<p>python matplotlib 双y轴图像实现<br>
<a href="https://blog.csdn.net/weixin_48964486/article/details/124134584" target="_blank" rel="noopener">https://blog.csdn.net/weixin_48964486/article/details/124134584</a></p>
<p>其中第一个坐标系正常创建，第二个坐标系则使用专有的 twinx() 方法创建。因为有了两个 y 轴，如果再简单地使用 plt.ylabel() 等方法，则只能操作到左轴，而影响不到右轴。</p>
<pre><code>data1 = [random.randint(1,50) for x in range(10)]
data2 = [random.randint(1,1000) for x in range(10)]

fig = plt.figure(figsize=(10, 8))

ax1 = fig.add_subplot(111)
ax1.set_ylabel('左 Y 轴')
ax1.plot(data1)

ax2 = ax1.twinx()
ax2.plot(data2, color='#3399ff', linestyle='--', marker='o', linewidth=2)
ax2.set_ylabel('右 Y 轴')

plt.show()
</code></pre>
<hr>
<h2 id="数学"><a class="header-anchor" href="#数学">¶</a>数学</h2>
<p>实践线性规划：使用 Python 进行优化<br>
<a href="https://bbs.huaweicloud.com/blogs/317032" target="_blank" rel="noopener">https://bbs.huaweicloud.com/blogs/317032</a></p>
<p>线性规划是数学规划中使用的一组技术，有时称为数学优化，用于求解线性方程组和不等式系统，同时最大化或最小化某些线性函数。它在科学计算、经济学、技术科学、制造、运输、军事、管理、能源等领域很重要。</p>
<p>用python解决线性规划<br>
<a href="https://bbs.huaweicloud.com/blogs/317032" target="_blank" rel="noopener">https://bbs.huaweicloud.com/blogs/317032</a></p>
<p>Numpy中np.dot与np.matmul的区别<br>
<a href="https://blog.csdn.net/ACTerminate/article/details/96151132" target="_blank" rel="noopener">https://blog.csdn.net/ACTerminate/article/details/96151132</a></p>
<p>python实现最小二乘法<br>
<a href="https://www.csdn.net/tags/MtTaIg1sMDc5MTQtYmxvZwO0O0OO0O0O.html" target="_blank" rel="noopener">https://www.csdn.net/tags/MtTaIg1sMDc5MTQtYmxvZwO0O0OO0O0O.html</a></p>
<p>Python最小二乘法拟合与作图<br>
<a href="https://www.jianshu.com/p/8850b94ec61c" target="_blank" rel="noopener">https://www.jianshu.com/p/8850b94ec61c</a></p>
<p>线性代数下的最小二乘法及numpy运算案例<br>
<a href="https://zhuanlan.zhihu.com/p/369173593" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/369173593</a></p>
<pre><code>def least_squares(x,y):
    ones = np.ones((len(x)))
    A = np.c_[ones,x]
    ATA = A.T.dot(A)
    ATb = A.T.dot(y)
    inv_ATA = np.linalg.inv(ATA)
    solution = inv_ATA.dot(ATb)
    return solution
</code></pre>
<p>Python手工实现朴素贝叶斯分类及预测<br>
<a href="https://zhuanlan.zhihu.com/p/486313053" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/486313053</a></p>
<p>简洁高斯朴素贝叶斯分类原理及python实现<br>
<a href="https://blog.csdn.net/qq_45656248/article/details/118796503" target="_blank" rel="noopener">https://blog.csdn.net/qq_45656248/article/details/118796503</a><br>
<a href="https://baijiahao.baidu.com/s?id=1691227678810779479&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">https://baijiahao.baidu.com/s?id=1691227678810779479&amp;wfr=spider&amp;for=pc</a></p>
<p>这是每个数据科学职业生涯开始时的经典：朴素贝叶斯分类器。或者更应该说是朴素贝叶斯分类器家族，因为它们有很多种风格例如，有多项式朴素贝叶斯，伯努利朴素贝叶斯，还有高斯朴素贝叶斯分类器，每个分类器在一个小细节上都不同，我们会发现：朴素贝叶斯算法在设计上非常简单，但在许多复杂的实际情况下被证明是有用的。</p>
<p>Numpy实现NaiveBayes（朴素贝叶斯）<br>
<a href="https://blog.csdn.net/hhhhhhhhhhwwwwwwwwww/article/details/121558563" target="_blank" rel="noopener">https://blog.csdn.net/hhhhhhhhhhwwwwwwwwww/article/details/121558563</a></p>
<p>numpy实现朴素贝叶斯模型（高斯分布）<br>
<a href="https://www.jianshu.com/p/efa980944235" target="_blank" rel="noopener">https://www.jianshu.com/p/efa980944235</a></p>
<p>数值分析-雅克比迭代法<br>
<a href="https://blog.csdn.net/ITGGU/article/details/122169136" target="_blank" rel="noopener">https://blog.csdn.net/ITGGU/article/details/122169136</a></p>
<hr>
<p>postgree 的终端工具 psql 里输入 <code>\x on</code> 可以让输出结果按列显示，相当于 mysql client里的 <code>\G</code></p>
<hr>
<p>蒙特卡洛模拟股票曲线，设置均值，标准差，以及跳空高开和跳空低开的概率<br>
<a href="https://github.com/boyac/pyOptionPricing" target="_blank" rel="noopener">https://github.com/boyac/pyOptionPricing</a></p>
<p>用python动手实践与学习大数定律与中心极限定理<br>
<a href="https://zhuanlan.zhihu.com/p/394395551" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/394395551</a></p>
<p>各种分布的随机数生成器<br>
<a href="https://numpy.org/doc/stable/reference/random/generator.html#distributions" target="_blank" rel="noopener">https://numpy.org/doc/stable/reference/random/generator.html#distributions</a><br>
<a href="https://blog.csdn.net/weixin_42029738/article/details/81977492" target="_blank" rel="noopener">https://blog.csdn.net/weixin_42029738/article/details/81977492</a></p>
<p>离散分布的相关对象，每个对象有概率质量函数，累计分布函数，百分位函数，分布描述这些<br>
<a href="https://docs.scipy.org/doc/scipy/reference/stats.html#discrete-distributions" target="_blank" rel="noopener">https://docs.scipy.org/doc/scipy/reference/stats.html#discrete-distributions</a></p>
<ul>
<li>rvs(n, p, loc=0, size=1, random_state=None) Random variates.</li>
<li>pmf(k, n, p, loc=0) Probability mass function.</li>
<li>cdf(k, n, p, loc=0) Cumulative distribution function.</li>
<li>ppf(q, n, p, loc=0) Percent point function (inverse of cdf — percentiles).</li>
<li>stats(n, p, loc=0, moments=’mv’) Mean(‘m’), variance(‘v’), skew(‘s’), and/or kurtosis(‘k’).</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-给博客启用HTTPS证书" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/17/给博客启用HTTPS证书/" class="article-date">
  	<time datetime="2016-04-17T12:08:39.000Z" itemprop="datePublished">2016-04-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/给博客启用HTTPS证书/">给博客启用HTTPS证书</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="开启443端口"><a class="header-anchor" href="#开启443端口">¶</a>开启443端口</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># iptables -A INPUT -p tcp --dport 443 -m state --state NEW,ESTABLISHED -j ACCEPT</span><br><span class="line"># iptables -A OUTPUT -p tcp --sport 443 -m state --state NEW,ESTABLISHED -j ACCEPT</span><br><span class="line"># service iptables save</span><br></pre></td></tr></table></figure>
<h3 id="申请证书"><a class="header-anchor" href="#申请证书">¶</a>申请证书</h3>
<p>生成用户标识私钥和域名证书私钥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/ssl</span><br><span class="line">cd /data/ssl</span><br><span class="line">openssl genrsa 4096 &gt; account.key</span><br><span class="line">openssl genrsa 4096 &gt; domain.key</span><br></pre></td></tr></table></figure>
<p>生成证书请求文件</p>
<pre><code>openssl req -new -sha256 -key domain.key -subj &quot;/&quot; -reqexts SAN -config &lt;(cat /etc/pki/tls/openssl.cnf &lt;(printf &quot;[SAN]\nsubjectAltName=DNS:ihuhao.com,DNS:www.ihuhao.com,DNS:app.ihuhao.com&quot;)) &gt; domain.csr
</code></pre>
<p>使用<code>acme-tiny</code>脚本到<code>Let's Encrypt</code> 申请证书, 下载acme_tiny脚本</p>
<pre><code>wget https://raw.githubusercontent.com/diafygi/acme-tiny/master/acme_tiny.py
</code></pre>
<p>创建一个目录用于存放证书验证过程中的临时文件</p>
<pre><code>mkdir  /data/www/challenges/
</code></pre>
<p>设置nginx, 以<code>blog.ihuhao.com</code>为例, 如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    server_name  blog.ihuhao.com;</span><br><span class="line"></span><br><span class="line">    ssl_certificate     /data/ssl/chained.pem;</span><br><span class="line">    ssl_certificate_key /data/ssl/domain.key;</span><br><span class="line"></span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">    ssl_dhparam /data/ssl/dhparam.pem;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_ciphers &quot;EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !RC4&quot;;</span><br><span class="line">    keepalive_timeout 70;</span><br><span class="line">    ssl_session_cache shared:SSL:10m;</span><br><span class="line">    ssl_session_timeout 10m; </span><br><span class="line"></span><br><span class="line">    add_header Strict-Transport-Security max-age=63072000;</span><br><span class="line">    add_header X-Frame-Options DENY;</span><br><span class="line">    add_header X-Content-Type-Options nosniff;</span><br><span class="line"></span><br><span class="line">    location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">        alias /data/www/challenges/;</span><br><span class="line">        autoindex on;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        alias /home/wawa/src/onlytiancai.github.io/;</span><br><span class="line">        expires 1h;</span><br><span class="line">        autoindex on;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行脚本，申请证书</p>
<pre><code>python acme_tiny.py --account-key ./account.key --csr ./domain.csr --acme-dir /data/www/challenges/ &gt; ./signed.crt
</code></pre>
<p>脚本执行过程中，会在<code>/data/www/challenges</code>目录下生成一个随机文件，然后<code>Let's Encrypt</code>会访问<code>http://blog.ihuhao.com/.well-known/acme-challenge/</code>下的文件用于验证域名，所以上面的nginx配置要配置好，整个脚本才能执行成功。</p>
<p>下载中间证书，并和上一步生成的crt粘合在一起，生成nginx使用的证书。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -O - https://letsencrypt.org/certs/lets-encrypt-x1-cross-signed.pem &gt; intermediate.pem</span><br><span class="line">cat signed.crt intermediate.pem &gt; chained.pem</span><br></pre></td></tr></table></figure>
<p>nginx配置，上面已经贴过了，证书路径，证书私钥路径，证书参数配置等都配好了，刷新下nginx配置，网站就可以用https访问了。</p>
<pre><code>/usr/local/nginx/sbin/nginx -s reload
</code></pre>
<h3 id="hexo改动"><a class="header-anchor" href="#hexo改动">¶</a>hexo改动</h3>
<p>因为上面的nginx配置开启了<code>HSTS</code>, 但hexo的yilia模版里有的地方强引用了http的脚本，所以要做适当的修改，目前主要有如下两个路径</p>
<pre><code>./themes/yilia/layout/_partial/after-footer.ejs
./themes/yilia/layout/_partial/mathjax.ejs
</code></pre>
<p>把<code>http://xxx</code>改成<code>//xxx</code>，然后<code>hexo generate</code>生成一下博客就可以了</p>
<h3 id="参考链接"><a class="header-anchor" href="#参考链接">¶</a>参考链接</h3>
<ul>
<li><a href="https://imququ.com/post/letsencrypt-certificate.html" target="_blank" rel="noopener">Let’s Encrypt，免费好用的 HTTPS 证书</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-腾讯云主机迁移" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/27/腾讯云主机迁移/" class="article-date">
  	<time datetime="2016-03-26T16:09:01.000Z" itemprop="datePublished">2016-03-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/27/腾讯云主机迁移/">腾讯云主机迁移</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>以前在广州区买的共享核主机，不能续费了，官方给发了代金券，免费升级到独立核的1核1G主机，所以就重新买了北京机房的云主机，要把以前的数据全部导过来。</p>
<p>安装好Centos6.5 64bit，安全组选了开放所有端口，然后自己用iptables做安全限制就行。</p>
<p>先用vnc以root登录，密码在邮件发给你了，新建wawa用户，设置密码，用visudo设置允许无密码sudo，配置sshd config把root的ssh登录关了，端口换成非22端口， 允许ssh登录，允许密码登录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">useradd wawa</span><br><span class="line">passwd wawa</span><br><span class="line"></span><br><span class="line">visudo</span><br><span class="line"></span><br><span class="line">    wawa    ALL=(ALL)       NOPASSWD: ALL</span><br><span class="line"></span><br><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line">    Port 36000</span><br><span class="line">    PermitRootLogin no</span><br><span class="line">    AllowUsers wawa</span><br><span class="line">    PasswordAuthentication yes </span><br><span class="line">    ChallengeResponseAuthentication yes </span><br><span class="line"></span><br><span class="line">service sshd reload</span><br></pre></td></tr></table></figure>
<p>然后就可以用putty登录wawa账户了。</p>
<p>旧机器上把要迁移的数据打包, 主要有Let’s Encrypt的脚本，.vim, .vimrc，.bashrc，.bash_profile，crontab, rc.local, nginx配置，.ssh等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tar zcfv bk.tar.gz \</span><br><span class="line">    /usr/local/nginx/conf/nginx.conf \</span><br><span class="line">    /var/spool/cron/root \</span><br><span class="line">    /etc/rc.d/rc.local \</span><br><span class="line">    /data/ssl/ \</span><br><span class="line">    .vimrc .vim .gitconfig .bashrc .bash_profile .ssh/ \</span><br><span class="line">    scripts/ src/ readme</span><br></pre></td></tr></table></figure>
<p>打包了，想办法下周到新机器上，解压，大多文件放home目录就可以了，nginx配置，rc.local, crontab, let’s encrypt得重新对一遍。</p>
<p>安装必备环境，git, nginx, python, node。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">sudo yum gcc</span><br><span class="line">sudo yum install gcc-c++</span><br><span class="line">sudo yum install make</span><br><span class="line">sudo yum install sqlite-devel</span><br><span class="line">sudo yum install zlib-devel</span><br><span class="line">sudo yum install readline-devel</span><br><span class="line">sudo yum install bzip2-devel</span><br><span class="line">sudo yum install git</span><br><span class="line">sudo yum install pcre pcre-devel</span><br><span class="line">sudo yum install openssl-devel</span><br><span class="line">yum install mysql-devel</span><br><span class="line"></span><br><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.0/install.sh | bash</span><br><span class="line">nvm install 5.0</span><br><span class="line"></span><br><span class="line">wget https://www.python.org/ftp/python/2.7.7/Python-2.7.7.tgz --no-check-certificate</span><br><span class="line">tar xf Python-2.7.7.tgz</span><br><span class="line">cd Python-2.7.7</span><br><span class="line">./configure --prefix=/usr/local</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br><span class="line">/usr/local/bin/python -V</span><br><span class="line"></span><br><span class="line">wget http://nginx.org/download/nginx-1.9.12.tar.gz</span><br><span class="line">tar xf nginx-1.9.12.tar.gz</span><br><span class="line">cd nginx-1.9.12</span><br><span class="line">./configure --prefix=/usr/local/nginx --with-http_ssl_module --with-http_stub_status_module</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br><span class="line">sudo /usr/local/nginx/sbin/nginx</span><br></pre></td></tr></table></figure>
<p>防火墙设置下, 只允许ssh端口，80，443链接，把其它的端口都关了，再把本机访问本机打开，允许本机向外的访问。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">iptables -L -n</span><br><span class="line">iptables -A INPUT -p tcp --dport 36000 -j ACCEPT  </span><br><span class="line">iptables -A OUTPUT -p tcp --sport 36000 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -p tcp --sport 80 -m state --state NEW,ESTABLISHED -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 443 -m state --state NEW,ESTABLISHED -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -p tcp --sport 443 -m state --state NEW,ESTABLISHED -j ACCEPT</span><br><span class="line"></span><br><span class="line">iptables -P INPUT DROP</span><br><span class="line">iptables -P FORWARD DROP</span><br><span class="line">iptables -P OUTPUT DROP</span><br><span class="line"></span><br><span class="line">iptables -A INPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT</span><br><span class="line"></span><br><span class="line">iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line"></span><br><span class="line">iptables -A OUTPUT -j ACCEPT</span><br><span class="line"></span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure>
<p>基本能用了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/主机迁移/">主机迁移</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-性别列上真的不需要建索引吗" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/19/性别列上真的不需要建索引吗/" class="article-date">
  	<time datetime="2016-03-19T05:16:51.000Z" itemprop="datePublished">2016-03-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/19/性别列上真的不需要建索引吗/">性别列上真的不需要建索引吗</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>性别列上真的不需要建索引吗，我们假设有100w数据里只有10个女生，要找到这10个女生，看看有索引和没索引的差别。</p>
<p>建表</p>
<pre><code>use test;
create table people(`id` int(11) auto_increment, `gender` char(1), primary key(`id`));
</code></pre>
<p>建一个用于填充数据的存储过程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">delimiter // </span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE filldata()</span><br><span class="line">begin</span><br><span class="line">    declare v int default 0;</span><br><span class="line"></span><br><span class="line">    while v &lt; 50000</span><br><span class="line">    do</span><br><span class="line">        insert into people(gender)  values (&apos;M&apos;);</span><br><span class="line">        set v = v + 1;</span><br><span class="line">    end while;</span><br><span class="line"></span><br><span class="line">    insert into people(gender)  values (&apos;F&apos;);</span><br><span class="line"></span><br><span class="line">    while v &lt; 100000</span><br><span class="line">    do</span><br><span class="line">        insert into people(gender)  values (&apos;M&apos;);</span><br><span class="line">        set v = v + 1;</span><br><span class="line">    end while;</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>
<p>填充数据，执行10次这个存储过程,大概每10w男生里有一个女生。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">call filldata();</span><br><span class="line">call filldata();</span><br><span class="line">call filldata();</span><br><span class="line">call filldata();</span><br><span class="line">call filldata();</span><br><span class="line">call filldata();</span><br><span class="line">call filldata();</span><br><span class="line">call filldata();</span><br><span class="line">call filldata();</span><br><span class="line">call filldata();</span><br></pre></td></tr></table></figure>
<p>确认数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(*) from people;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">|  1000010 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (0.15 sec)</span><br></pre></td></tr></table></figure>
<p>找出所有女生, 花费0.23秒</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from people where gender = &apos;F&apos; limit 10;</span><br><span class="line">+--------+--------+</span><br><span class="line">| id     | gender |</span><br><span class="line">+--------+--------+</span><br><span class="line">|  50001 | F      |</span><br><span class="line">| 150002 | F      |</span><br><span class="line">| 250003 | F      |</span><br><span class="line">| 350004 | F      |</span><br><span class="line">| 450005 | F      |</span><br><span class="line">| 550006 | F      |</span><br><span class="line">| 650007 | F      |</span><br><span class="line">| 750008 | F      |</span><br><span class="line">| 850009 | F      |</span><br><span class="line">| 950010 | F      |</span><br><span class="line">+--------+--------+</span><br><span class="line">10 rows in set (0.23 sec)</span><br></pre></td></tr></table></figure>
<p>在性别上建个索引再找出所有女生，花费0秒</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create index idx_people_gender on people(gender);</span><br><span class="line">Query OK, 0 rows affected (2.70 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from people where gender = &apos;F&apos; limit 10;</span><br><span class="line">+--------+--------+</span><br><span class="line">| id     | gender |</span><br><span class="line">+--------+--------+</span><br><span class="line">|  50001 | F      |</span><br><span class="line">| 150002 | F      |</span><br><span class="line">| 250003 | F      |</span><br><span class="line">| 350004 | F      |</span><br><span class="line">| 450005 | F      |</span><br><span class="line">| 550006 | F      |</span><br><span class="line">| 650007 | F      |</span><br><span class="line">| 750008 | F      |</span><br><span class="line">| 850009 | F      |</span><br><span class="line">| 950010 | F      |</span><br><span class="line">+--------+--------+</span><br><span class="line">10 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>那这种情况下还是有索引查询快。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-开启php-fpm-status-page" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/17/开启php-fpm-status-page/" class="article-date">
  	<time datetime="2016-03-17T04:25:00.000Z" itemprop="datePublished">2016-03-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/17/开启php-fpm-status-page/">开启php-fpm status page</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>要监控PHP运行情况，打开php-fpm的status page可以提供很多有用的信息。</p>
<p>找到php-fpm的配置路径和master的pid</p>
<pre><code># ps -ef | grep &quot;php-fpm: master&quot;
root     31236     1  0 11:46 ?        00:00:00 php-fpm: master process (/usr/local/php/etc/php-fpm.conf)  
</code></pre>
<p>修改php-fpm配置，打开status page</p>
<pre><code>vi /usr/local/php/etc/php-fpm.conf
pm.status_path = /php_status
</code></pre>
<p>重启php-fpm</p>
<pre><code>kill -USR2 31236
</code></pre>
<p>找到nginx配置路径</p>
<pre><code># ps -ef | grep &quot;nginx: master&quot;
root      3813     1  0 Mar09 ?        00:00:00 nginx: master process /usr/local/nginx/sbin/nginx
</code></pre>
<p>修改nginx配置，增加localhost的server节</p>
<pre><code>server  
{
    listen       80;     
    server_name  localhost;
    error_log logs/localhost-error_log;
    access_log logs/localhost-access_log;

    location ~ ^/php_status$ 
    {       
        allow 127.0.0.1;
        deny all;

        include fastcgi_params;
        fastcgi_pass unix:/var/run/php5-fpm.socket; # 根据真实情况改动, 详见php-fpm配置
        fastcgi_param SCRIPT_FILENAME $fastcgi_script_name;
    }       

}
</code></pre>
<p>重启nginx</p>
<pre><code>/usr/local/nginx/sbin/nginx -t
/usr/local/nginx/sbin/nginx -s reload
</code></pre>
<p>测试php-fpm状态页</p>
<pre><code># curl localhost/php_status           
pool:                 www
process manager:      static
start time:           17/Mar/2016:12:09:30 +0800
start since:          747
accepted conn:        4992
listen queue:         0
max listen queue:     0
listen queue len:     0
idle processes:       196
active processes:     4
total processes:      200
max active processes: 15
max children reached: 0
slow requests:        0
</code></pre>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/监控/">监控</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-新的开始" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/06/新的开始/" class="article-date">
  	<time datetime="2016-03-06T11:09:27.000Z" itemprop="datePublished">2016-03-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/06/新的开始/">新的开始</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在公司申请了新的笔记本，要重新初始化一套新的环境，这几年都习惯了<code>Putty+Vim</code>开发 ，<br>
但新笔记本默认装了windows，所以得先把linux安装起来，虚拟机就用VirtualBox,<br>
虚拟机管理用Vagrant，方便管理，打包的镜像也方便移植，下次重装系统还能接着用。</p>
<p>VirtualBox和Vagrant都从官网下载就可以了，一路next安装好，然后Vagrant的路径在 环境变量里设置一下，方便在cmd下调用。</p>
<p>然后下周Vagrant的镜像，以后可能要玩docker，所以在<a href="http://www.vagrantbox.es/" target="_blank" rel="noopener">vagrantbox.es</a> 上下载了一个<code>CentOS 6.6 x64 (Minimal, VirtualBox Guest Additions</code>。</p>
<p>东西都下载好了，开搞</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vagrant.exe box add base ..\download\centos-6.6-x86_64.box</span><br><span class="line">vagrant.exe init base</span><br><span class="line">vagrant up</span><br></pre></td></tr></table></figure>
<p>你会发现，一直卡着，根本就启动不起来，打开VirtualBox看到虚拟机已经在运行了。 但确实vagrant up报错，用ssh也连不上。后来仔细在VirtualBox看了下， 只能装32bit的操作系统，想起来了，需要在BIOS里打开Intel的虚拟化。BIOS设置完重启后 在Virtualbox新建虚拟机选择操作系统时可以看到64bit操作系统了，这时候再<code>vagrant up</code> 就可以了，具体BIOS设置方式Google下有很多。</p>
<p>在cmd下打命令还是不习惯，因为习惯了linux终端下的各种命令，快捷键等，所以要下载了 一个<a href="http://cmder.net/" target="_blank" rel="noopener">cmder</a>用，下载完整版的，已经自带ls, grep,git等命令，非常好用。具体设置和使用搜一下。</p>
<p>用惯了putty，又下载了个<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html" target="_blank" rel="noopener">putty</a>, 我一般设置如下参数</p>
<ol>
<li>window\appearance\font setting:consolas 12pt</li>
<li>window\translate\charset:utf-8</li>
<li>window\selection\action of mouse buttons:windows …</li>
<li>window\line of scoreback:20000</li>
<li>connection\auto-login username:root</li>
<li>connection\seconds of keepalive:10</li>
</ol>
<p>putty登录上去后，安装软件时很慢，发现默认就1G内存，1盒CPU，又把虚拟机配置成2核2G了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">config.vm.provider &quot;virtualbox&quot; do |v|</span><br><span class="line">  v.memory = 1024</span><br><span class="line">  v.cpus = 2</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>再有一个坑，就是Vagrant会默认映射一个目录<code>/vagrant</code>, 这个目录下执行chmod等是不起 作用的，因为它还在windows上，不支持linux文件权限。往里安装一个软件时，会有意想不到 的坑等着你，比如mysql的my.cnf配置就需要特殊的权限，否则mysql是启动不起来的。</p>
<p>登录centos后，发现yum等都不能用，因为公司上网需要代理，所以要设置yum,wget的代理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ vi ~/.wgetrc</span><br><span class="line">use_proxy=yes</span><br><span class="line">http_proxy=proxy.xxx.com:8080</span><br><span class="line"></span><br><span class="line">$ vi /etc/yum.conf</span><br><span class="line">proxy=http://proxy.xxx.com:8080</span><br></pre></td></tr></table></figure>
<p>最后就是在centos上把<code>.vimrc</code>简单配置下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">set nocp</span><br><span class="line">set ts=4</span><br><span class="line">set sw=4</span><br><span class="line">set smarttab</span><br><span class="line">set et</span><br><span class="line">set nu</span><br><span class="line">set ambiwidth=double</span><br><span class="line">filetype plugin indent on</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">set encoding=UTF-8</span><br><span class="line">set langmenu=zh_CN.UTF-8</span><br><span class="line">language message zh_CN.UTF-8</span><br><span class="line">set fileencodings=ucs-bom,utf-8,cp936,gb18030,big5,euc-jp,euc-kr,latin1</span><br><span class="line">set fileencoding=utf-8</span><br></pre></td></tr></table></figure>
<p>好了，基本搞定开发环境了，可以愉快的在centos上玩耍了。</p>
<p>参考链接</p>
<ul>
<li><a href="https://github.com/astaxie/Go-in-Action/blob/master/ebook/zh/01.2.md" target="_blank" rel="noopener">Vgrant安装配置</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/centos/">centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cmder/">cmder</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/putty/">putty</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vagrant/">vagrant</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vim/">vim</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2024 onlytiancai
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.6/require.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>